!function(T,Z){"use strict";var F="ht",d=T[F],f="position",n="absolute",_="px",r="left",C="top",u="innerHTML",y="className",X="width",i="height",J="0",x="▶",c="display",K="none",R="visibility",Q="user-select",m="margin",P="padding",I=null,h=d.Color,M=d.Default,o=M.getInternal(),S=T.setTimeout,V=T.setInterval,k=T.clearTimeout,v=T.clearInterval,N=T.parseInt,B=M.isLeftButton,w=M.isDragging,H=M.startDragging,s=M.getDistance,Y=M.isTouchable,g=h.widgetIconHighlight,b=h.widgetIconBorder,$=h.widgetIconGradient,O=function(){return document},j=function(A,k){return A.querySelectorAll(k)},L=function(W,$){var b=O().createElement(W);return"ul"===W&&(U(b,f,"relative"),U(b,m,J),U(b,P,J),U(b,"list-style",K),U(b,"box-sizing","border-box"),U(b,"-moz-box-sizing","border-box"),U(b,c,"inline-block"),U(b,"vertical-align","text-bottom"),U(b,"border","1px solid "+M.contextMenuBorderColor),U(b,"box-shadow","0 0 16px 1px "+M.contextMenuShadowColor),U(b,"overflow","hidden"),$||U(b,"border-radius",5+_)),b},a=function(P){var h=P.touches[0];return h?h:P.changedTouches[0]},e=function(){return L("div")},t=function(){return L("canvas")},U=function(J,d,x){J.style.setProperty(d,x,I)},E=function(o,E,l){M.def(d.widget[o],E,l)},D=function(i,M){i.appendChild(M)},p=function(c,Z){c.removeChild(Z)},q=function(){return O().body},z=function(b,D,M,o){b.addEventListener(D,M,!!o)},G=function(g,Y,a,w){g.removeEventListener(Y,a,!!w)};o.addMethod(M,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:b},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:g}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:b},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:g,gradient:M.imageGradient,gradientColor:$,background:g}]},contextMenuLabelFont:(Y?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)"},!0);var W=function(W){var y=this,I=W._view;if(y.$11b=W,y.addListeners(),z(I,"contextmenu",function(j){j.preventDefault()}),!Y){var O=y.$37b=y.$36b.bind(y);z(I,"mouseover",O),z(I,"mouseout",O)}};M.def(W,Z,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(d){if(M.preventDefault(d),B(d)){for(var O=this,q=O.$11b,r=O.getView(),p=r.children,X=0;X<p.length;X++){var T=p[X],w=T.$24b,P=T.$25b;if(w&&w.contains(d.target))return q.scrollUp(T),O.$28b=S(function(){O.$29b=V(function(){q.scrollUp(T)},100)},500),H(O,d),void 0;if(P&&P.contains(d.target))return q.scrollDown(T),O.$28b=S(function(){O.$29b=V(function(){q.scrollDown(T)},100)},500),H(O,d),void 0}Y&&(d=a(d)),O.$30b={x:d.pageX,y:d.pageY}}},handle_mousedown:function(V){this.handle_touchstart(V)},handle_touchend:function(n){if(B(n)){var D=this,z=D.$30b,K=Y?{x:a(n).pageX,y:a(n).pageY}:{x:n.pageX,y:n.pageY};if(!z||s(z,K)>1)return delete D.$30b,void 0;for(var x=D.getView(),r=D.$11b,S=n.target,e=I,j=I,g=r._items,w=x.$26b,J=0;J<w.length;J++)if(j=w[J],j.contains(S)){e=j.getAttribute("data-id");break}if(e&&g){var d=r.$17b(g,function(y){return y._id===e});if(d){var f=!1;d.disabled instanceof Function?f=d.disabled.call(r,d):d.disabled===!0&&(f=!0),f||(d.items?Y&&D.$36b(j,!0):r.$1b(d,n))}}delete D.$30b}},$36b:function(S,c){if(!w()){var X,T=this,$=T.$11b,V=T.getView(),Q=$.$20b||V.children[0],E=$.$19b,W=V.$26b,g=V.children,h=S.target,G=V.getBoundingClientRect(),L=M.getWindowInfo(),t=L.width,P=L.height,e=function(V){for(var G=0;G<g.length;G++){var R=g[G],w=new RegExp(V+"$"),p=R[y];if(p&&(w.test(p)||p.indexOf(V+" ")>=0))return R}},O=function(b){for(var V=0;V<W.length;V++){var j=W[V],$=new RegExp(b+"$"),F=j[y];if(F&&($.test(F)||F.indexOf(b+" ")>=0))return j}},x=function(V){var w=O("menu-item"+V.$45b),p=w.getBoundingClientRect(),H=p.top-G.top,y=p.left-G.left;U(V,C,H+_),U(V,r,y+p.width+_);var B=V.getBoundingClientRect(),$=B.top,M=B.left,S=B.height,q=B.width,i=$+S+2,Z=M+q+2;i>P&&U(V,C,H+P-i+_),Z>t&&U(V,r,y-q+_)};if(c)X=S;else{if("mouseover"===S.type){for(var K=0;K<W.length;K++){var z=W[K];if(z.contains(h)){X=z;break}}if(!X&&E){var u=E.parentNode,v=e("submenu"+E.getAttribute("data-id"));(v&&v.contains(h)||u&&u.contains(h))&&(X=E)}}else if("mouseout"===S.type){for(var I=!1,J=S.relatedTarget,K=0;K<g.length;K++){var Y=g[K];if("hidden"!==Y.style.visibility&&Y.contains(J)){I=!0;break}}if(I)return}!X&&Q&&(X=O("menu-item"+(Q.$45b||"NaN")))}if(X!=E){if(E)for(var p=E;p;){p[y]=p[y].replace(" menu-item-hover",""),p[y].indexOf("disabled")<0&&(U(p,"background-color",M.contextMenuBackground),U(p,"color",M.contextMenuLabelColor));var B=e("submenu"+p.getAttribute("data-id"));B&&U(B,R,"hidden");var q=p.parentNode;p=O("menu-item"+(q.$45b||"NaN"))}if(X){for(var b=X,i=[];b;){b[y]+=" menu-item-hover",b[y].indexOf("disabled")<0&&(U(b,"background-color",M.contextMenuHoverBackground),U(b,"color",M.contextMenuHoverLabelColor));var n=e("submenu"+b.getAttribute("data-id"));n&&(U(n,R,"visible"),i.push(n));var q=b.parentNode;b=O("menu-item"+(q.$45b||"NaN"))}i.reverse(),i.forEach(function(V){x(V)})}}$.$19b=X,$.$20b=X?X.parentNode:V.children[0]}},handle_mouseup:function(J){this.handle_touchend(J)},handleWindowTouchEnd:function(){var g=this;g.$28b!=I&&(k(g.$28b),delete g.$28b),g.$29b!=I&&(v(g.$29b),delete g.$29b),delete g.$34b,delete g.$30b,delete g.$35b},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(r){if(!w()&&B(r)){for(var p=this,M=p.getView().children,T=I,k=0;k<M.length;k++){var o=M[k];if(o.contains(r.target)){T=o;break}}var E=p.$30b,S=Y?{x:a(r).pageX,y:a(r).pageY}:{x:r.pageX,y:r.pageY};T&&E&&s(E,S)>2&&(H(p,r),p.$34b=T,p.$35b=T.$18b)}},handleWindowTouchMove:function(_){var i=this,k=i.$11b,o=i.$34b,U=i.$35b,W=i.$30b;if(W&&o){var r=Y?{x:a(_).pageX,y:a(_).pageY}:{x:_.pageX,y:_.pageY},F=r.y-W.y;F>0?k.scrollUp(o,o.$18b-(U-F)):k.scrollDown(o,U-F-o.$18b)}},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},$10b:function(m,L){m.preventDefault();for(var X=this,f=X.getView().children,U=I,V=0;V<f.length;V++){var g=f[V];if(g.contains(m.target)){U=g;break}}if(U){var x=this.$11b,p=x.getRowHeight();Math.abs(L)>.05&&(L>0?x.scrollUp(U,L*p):0>L&&x.scrollDown(U,-L*p))}},handle_mousewheel:function(s){this.$10b(s,s.wheelDelta/40)},handle_DOMMouseScroll:function(Q){this.$10b(Q,-Q.detail)},$44b:function(w){this.getView().contains(w.target)||this.$11b.hide()},$41b:function(r){this.$11b.show(r)},$4b:function(U,B){var v=this.$11b;if(B=B||v._items,B&&B.length&&U.keyCode){var n=[U.keyCode];U.shiftKey&&n.push(16),U.ctrlKey&&n.push(17),U.altKey&&n.push(18),/mac/.test(T.navigator?T.navigator.userAgent.toLowerCase():"")?U.metaKey&&n.push(17):U.metaKey&&n.push(91),n.sort();var b=n.join(),S=v.$17b(B,function(_){if(_.key){var L=_.key.slice(0);return L.sort(),b===L.join()}});if(S){S.preventDefault!==!1&&U.preventDefault();var G=!1;S.disabled instanceof Function?G=S.disabled.call(v,S):S.disabled===!0&&(G=!0),G||v.$1b(S,U)}}},$39b:function(F){var W=this,G=a(F);W.$32b={x:G.pageX,y:G.pageY}},$38b:function(t){var H=this,q=a(t);H.$31b={x:q.pageX,y:q.pageY},H.$33b=S(function(){H.$31b&&(H.$32b?s(H.$31b,H.$32b)<10&&H.$11b.show(t):H.$11b.show(t)),delete H.$33b,delete H.$31b,delete H.$32b},600)},$40b:function(){var n=this;n.$33b!=I&&(k(n.$33b),delete n.$33b,delete n.$31b,delete n.$32b)}}),d.widget.ContextMenu=function(r){var i=this,c=i._view=e();c[y]="ht-widget-contextmenu",i.setItems(r),i.$13b=new W(i),U(c,"font",M.contextMenuLabelFont),U(c,f,n),U(c,"cursor","default"),U(c,"-webkit-"+Q,K),U(c,"-moz-"+Q,K),U(c,"-ms-"+Q,K),U(c,Q,K),U(c,"box-sizing","border-box"),U(c,"-moz-box-sizing","border-box"),M.baseZIndex!=I&&U(c,"z-index",N(M.baseZIndex)+2+""),i.$3b=function(O){i.$13b.$4b(O)}},E("ContextMenu",Z,{$5b:0,_items:I,$21b:I,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var Z=this,N=Z._enableGlobalKey;N===!1&&(z(O(),"keydown",Z.$3b),Z._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,G(O(),"keydown",this.$3b)},setItems:function(c){this._items=c},setVisibleFunc:function(p){this.$16b=p},setLabelMaxWidth:function(c){this.$43b=c},$1b:function(j,S){var y=this;if("check"===j.type)j.selected=!j.selected;else if("radio"===j.type){var J=j.groupId;y.$17b(y._items,function(d){d.groupId===J&&(d.selected=!1)}),j.selected=!0}if(y.hide(),j.action)j.action.apply(j.scope||y,[j,S]);else if(j.href){var o=j.linkTarget||"_self";T.open(j.href,o)}},getItemByProperty:function(n,i,t){var h=this;if(t=t||h._items,!t||0===t.length)return I;var F=h.$17b(t,function(m){return m[n]===i});return F||I},scrollUp:function(O,d){var e=this;if(d=d==I?20:d,d=N(d),0!==d){var j=0;O.$18b>d&&(j=O.$18b-d),e.$42b(O,j),O.scrollTop=j,O.$18b=j}},scrollDown:function(i,F){var G=this;if(F=F==I?20:F,F=N(F),0!==F){var h=i.$22b,T=i.$23b,c=h-T;T+i.$18b+F<h&&(c=i.$18b+F),G.$42b(i,c),i.scrollTop=c,i.$18b=c}},$42b:function(y,m){m=m==I?y.$18b:m;var Q=y.$24b,l=y.$25b;Q&&(U(Q,"top",m+_),0==m?U(Q,c,K):U(Q,c,"block")),l&&(U(l,"bottom",-m+_),m==y.$22b-y.$23b?U(l,c,K):U(l,c,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(M,G){for(var U=0;U<M.length;U++){var v=M[U];if(G(v))return v;if(v.items){var R=this.$17b(v.items,G);if(R)return R}}},$2b:function(K,V){for(var H=this,A=0;A<K.length;A++){H.$5b++;var W=K[A];if(!H.$16b||H.$16b.call(H,W)){var B=L("li"),Z=H.$5b+"";if(U(B,"white-space","nowrap"),U(B,c,"block"),"separator"===W){var v=e();v[y]="separator",U(v,i,M.contextMenuSeparatorWidth+_),U(v,"background",M.contextMenuSeparatorColor),D(B,v)}else{W._id=Z,B.setAttribute("data-id",Z);var w=L("span"),T=L("span"),N=t(),j=e();if(U(w,c,"inline-block"),U(T,c,"inline-block"),N[y]="prefix",U(N,c,"inline-block"),U(N,X,"1em"),U(N,i,"1em"),U(N,"vertical-align","middle"),U(N,m,"0 0.2em"),"check"===W.type&&W.selected?N[y]+=" check-prefix":"radio"===W.type&&W.selected&&(N[y]+=" radio-prefix"),D(B,N),W.icon){var S=t();S[y]="contextmenu-item-icon",U(S,c,"inline-block"),U(S,"vertical-align","middle"),U(S,i,"1.2em"),U(S,X,"1.2em"),U(S,"margin-right","0.2em"),S.$50b=W.icon,D(w,S)}if(T[u]=W.label,D(w,T),D(B,w),j[y]="suffix",U(j,c,"inline-block"),U(j,"margin-left","1em"),U(j,"margin-right","0.4em"),U(j,"text-align","right"),U(j,"font-size","75%"),W.items&&(j[u]=x),W.suffix&&(j[u]=W.suffix),D(B,j),B[y]="menu-item menu-item"+Z,U(B,"background-color",M.contextMenuBackground),U(B,"color",M.contextMenuLabelColor),U(B,P,"3px 0"),W.disabled instanceof Function){var k=W.disabled.call(H,W);k&&(B[y]+=" disabled",U(B,"color",M.contextMenuDisabledLabelColor))}else W.disabled&&(B[y]+=" disabled",U(B,"color",M.contextMenuDisabledLabelColor));if(W.items){H.$21b||(H.$21b=new d.List);var b=L("ul",H._r);b[y]="submenu"+Z,b.$45b=Z,U(b,R,"hidden"),U(b,f,n),D(H._view,b),H.$21b.add(b),H.$2b(W.items,b)}}D(V,B)}}},rebuild:function(){var w=this,K=w._items,Q=w._view;if(Q&&(Q[u]="",w.$21b=I,w.$5b=0,w.$19b=I,w.$20b=I,Q.$26b=I,K&&0!==K.length)){var P=L("ul",w._r);D(Q,P),w.$2b(K,P)}},addTo:function(u){if(u){var K=this,T=K.$13b;if(K.$12b=u,K.$9b=function(r){T.$44b(r)},K.$27b=function(x){T.$41b(x)},Y){var F=K.$6b=function(q){T.$38b(q)},C=K.$7b=function(o){T.$39b(o)},e=K.$8b=function(I){T.$40b(I)};z(u,"touchstart",F,!0),z(u,"touchmove",C),z(u,"touchend",e)}else z(u,"contextmenu",K.$27b)}},show:function(Z,V,p){var B=this,p=p==I?!0:!1,L=B._view;if(L){if(B.invalidate(),1===arguments.length){var m=Z;if(Y){var x=a(m);Z=x.pageX,V=x.pageY}else Z=m.pageX,V=m.pageY}var Q=M.getWindowInfo(),b=Q.width,k=Q.height,o=Q.left,$=Q.top,h={pageX:Z,pageY:V,clientX:Z-o,clientY:V-$,target:1,originEvent:m},H=h.clientX,v=h.clientY,g=function(b){b.style.height=k-6+_;var R=e(),z=e(),v=function(C){U(C,f,n),U(C,"text-align","center"),U(C,X,"100%"),U(C,"font-size",10+_),U(C,"padding","2px 0"),U(C,"border","0px solid "+M.contextMenuScrollerBorderColor),U(C,"background-color",M.contextMenuScrollerColor1),C.style.backgroundImage="-webkit-linear-gradient(top, "+M.contextMenuScrollerColor1+", "+M.contextMenuScrollerColor2+")",C.style.backgroundImage="linear-gradient(to bottom, "+M.contextMenuScrollerColor1+", "+M.contextMenuScrollerColor2+")"};R[y]="menu-arrow-item menu-arrow-item-top",z[y]="menu-arrow-item menu-arrow-item-bottom",v(R),U(R,"top",J),U(R,"left",J),U(R,"border-bottom-width",1+_),R[u]="▲",v(z),U(z,"bottom",J),U(z,"left",J),U(z,"border-top-width",1+_),z[u]="▼",b.$24b=R,b.$25b=z,b.$18b=b.scrollTop,b.$22b=b.scrollHeight,b.$23b=b.clientHeight,D(b,R),D(b,z),B.$42b(b)};B.beforeShow&&B.beforeShow(h);var t=B._items;if(t&&(m&&m.preventDefault(),t.length)){B.rebuild(),D(q(),L),L.$26b=j(L,".menu-item");var N=L.children[0];N.offsetHeight>k&&g(N);var W=v+(p?1:0),P=H+(p?1:0),d=function(m){for(var Z=0,j=0,M=0,i=B.$43b;M<m.children.length;M++){var k=m.children[M];if(k.getAttribute("data-id")){var R=k.children[1],D=k.children[2],o=R.children;if(i){var h=o[0];o.length>1&&(h=o[1]),h.offsetWidth>i&&(h[u]="<marquee scrollamount='3'>"+h[u]+"</marquee>",h.children[0].style.verticalAlign="text-bottom",U(h,X,i+_),U(h,c,"inline-block"))}var q=R.offsetWidth,A=D.offsetWidth;q>Z&&(Z=q),A>j&&(j=A)}}for(M=0;M<m.children.length;M++){var k=m.children[M];if(k.getAttribute("data-id")){var R=k.children[1],D=k.children[2],b=R.children[0],H=R.children[1];!H&&b.style.width&&U(b,X,Z+_),U(R,X,Z+_),U(D,X,j+_)}}};d(N);var A=v+3+L.offsetHeight,E=H+3+L.offsetWidth;A>k?U(L,C,W-(A-k)+$+_):U(L,C,W+$+_),E>b?U(L,r,P-(E-b)+o+_):U(L,r,P+o+_);var T=B.$21b;T&&T.each(function(u){d(u),u.offsetHeight>k&&g(u)}),B.$9b&&z(O(),Y?"touchstart":"mousedown",B.$9b,!0),B.afterShow&&B.afterShow(h),B.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=I:!1},getRelatedView:function(){return this.$12b},hide:function(){var o=this,z=o._view;z&&z.parentNode&&(p(z.parentNode,z),G(O(),Y?"touchstart":"mousedown",o.$9b,!0),o.afterHide&&o.afterHide())},dispose:function(){var s=this,k=s.$12b,e=s._view;e&&(e.parentNode&&p(e.parentNode,e),s.disableGlobalKey(),k&&(Y?(G(k,"touchstart",s.$6b,!0),G(k,"touchmove",s.$7b),G(k,"touchend",s.$8b)):G(k,"contextmenu",s.$27b)),s._view=s._items=s.$21b=s.$19b=s.$12b=s.beforeShow=s.afterShow=s.afterHide=s.$9b=s.$3b=s.$6b=s.$7b=s.$8b=s.$27b=I)},$46b:function(V,w,K,h){var X=o.initContext(V);o.translateAndScale(X,0,0,1),X.clearRect(0,0,K,h),M.drawStretchImage(X,M.getImage(w),"fill",0,0,K,h),X.restore()},$47b:function(){var K,u,A,w=this,t=w._view;if(w.isShowing()){var d=j(t,".check-prefix");for(A=0;A<d.length;A++){var b=d[A];K=b.clientWidth,u=b.clientHeight,b.$48b=K,b.$49b=u,o.setCanvas(b,K,u)}var z=j(t,".radio-prefix");for(A=0;A<z.length;A++){var C=z[A];K=C.clientWidth,u=C.clientHeight,C.$48b=K,C.$49b=u,o.setCanvas(C,K,u)}var $=j(t,".contextmenu-item-icon");for(A=0;A<$.length;A++){var g=$[A];K=g.clientWidth,u=g.clientHeight,g.$48b=K,g.$49b=u,o.setCanvas(g,K,u)}}},validateImpl:function(){var Y,x,X,J=this,A=J._view;if(J.isShowing()){var w=j(A,".check-prefix");for(X=0;X<w.length;X++){var $=w[X];Y=$.$48b,x=$.$49b,Y&&x&&J.$46b($,M.contextMenuCheckIcon,Y,x)}var r=j(A,".radio-prefix");for(X=0;X<r.length;X++){var z=r[X];Y=z.$48b,x=z.$49b,Y&&x&&J.$46b(z,M.contextMenuRadioIcon,Y,x)}var e=j(A,".contextmenu-item-icon");for(X=0;X<e.length;X++){var g=e[X];Y=g.$48b,x=g.$49b,Y&&x&&J.$46b(g,M.getImage(g.$50b),Y,x)}}}})}(this,Object);