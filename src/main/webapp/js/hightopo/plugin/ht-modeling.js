!function(G,z,h){"use strict";var k="ht",D=G[k],s=null,S=Math,C=S.PI,M=S.cos,q=S.sin,E=S.abs,v=S.max,Z=S.sqrt,l=1e-5,Q=D.Default,u=Q.def,U=Q.startAnim,H=Q.createMatrix,c=Q.transformVec,x=Q.getInternal(),n=x.addMethod,p=x.superCall,a=x.toPointsArray,m=x.createNormals,L=x.toFloatArray,i=x.glMV,d=x.batchShape,T=x.createNodeMatrix,y=x.getFaceInfo,$=x.transformAppend,o=x.drawFaceInfo,N=x.createAnim,O=x.cube(),A=O.is,f=O.vs,X=O.uv,F=x.ui(),I=D.Node,r=D.Shape,B="h",P="v",J="front",w="back",R="left",j="right",V="top",e="bottom",_="dw.expanded",t=".expanded",g="dw.angle",K=".angle",W=function(t,O,J){u(k+"."+t,O,J)},Y=function(a,U,o){o?a.push(U.x,U.y):a.push(U.x,U.y,U.z)},b=[1,0,0],Sq=function(M,q,W,f){var Y,w,i,H,e=0,R=[];if(f)for(Y=f.length;Y>e;e+=3)w=f[e],i=f[e+1],H=f[e+2],R.push(new Ll([new qq([q[3*w],q[3*w+1],q[3*w+2]],b,W?[W[2*w],W[2*w+1],0]:s),new qq([q[3*i],q[3*i+1],q[3*i+2]],b,W?[W[2*i],W[2*i+1],0]:s),new qq([q[3*H],q[3*H+1],q[3*H+2]],b,W?[W[2*H],W[2*H+1],0]:s)],M));else for(Y=q.length;Y>e;e+=3)w=e,i=e+1,H=e+2,R.push(new Ll([new qq([q[3*w],q[3*w+1],q[3*w+2]],b,W?[W[2*w],W[2*w+1],0]:s),new qq([q[3*i],q[3*i+1],q[3*i+2]],b,W?[W[2*i],W[2*i+1],0]:s),new qq([q[3*H],q[3*H+1],q[3*H+2]],b,W?[W[2*H],W[2*H+1],0]:s)],M));return R},$g=[R,J,j,w,V,e],Rd=$g.concat("csg"),em=[0,6,12,18,24,30],$o=function(u,V,I){for(var p=T(u),M=[],F=0;6>F;F++)for(var i=$g[F],j=em[F],z=I?V.getFaceUv(u,i):s,$=I?V.getFaceUvScale(u,i):s,H=I?V.getFaceUvOffset(u,i):s,L=0;2>L;L++){var a,R,t,Q=A[j+3*L],W=A[j+3*L+1],y=A[j+3*L+2];if(I){if(z){var o=8*F;a=[z[2*Q-o],z[2*Q+1-o],0],R=[z[2*W-o],z[2*W+1-o],0],t=[z[2*y-o],z[2*y+1-o],0]}else a=[X[2*Q],X[2*Q+1],0],R=[X[2*W],X[2*W+1],0],t=[X[2*y],X[2*y+1],0];$&&(a[0]*=$[0],a[1]*=$[1],R[0]*=$[0],R[1]*=$[1],t[0]*=$[0],t[1]*=$[1]),H&&(a[0]+=H[0],a[1]+=H[1],R[0]+=H[0],R[1]+=H[1],t[0]+=H[0],t[1]+=H[1])}M.push(new Ll([new qq(c([f[3*Q],f[3*Q+1],f[3*Q+2]],p),b,a),new qq(c([f[3*W],f[3*W+1],f[3*W+2]],p),b,R),new qq(c([f[3*y],f[3*y+1],f[3*y+2]],p),b,t)],u))}return Cj.$15n(M)},jl=function(y,A){var H,T=y.data.getAttaches();if(T&&T.each(function(h){h instanceof nn&&h.s("attach.operation")&&(H||(H=[]),H.push(h))}),H){var q;$g.forEach(function(m){var j=Sq(m,y[m].vs,y[m].tuv);q=q?q.concat(j):j}),q=Cj.$15n(q),H.forEach(function(H){var c=H.s("attach.operation");q[c]&&(q=q[c]($o(H,y.gv,y.csg.tuv)))}),$g.forEach(function(L){L=y[L],L.vs=[],L.tuv&&(L.tuv=[])}),q.$19n().forEach(function(I){var w=I.$10n;if(w instanceof nn){if(w.s("attach.cull"))return;w="csg"}for(var s=y[w],a=s.vs,h=s.tuv,v=I.$9n,u=2;u<v.length;u++)Y(a,v[0].$24n),Y(a,v[u-1].$24n),Y(a,v[u].$24n),h&&(Y(h,v[0].uv,!0),Y(h,v[u-1].uv,!0),Y(h,v[u].uv,!0))})}Rd.forEach(function(f){var w=y[f];w.visible&&w.vs.length?(w.ns=m(w.vs),L(w,"vs"),L(w,"tuv")):delete y[f]}),A&&(d(y,s,A),y.clear())};n(Q,{createFrameModel:function(r,P,R,i){r=r==s?.07:r,P=P==s?r:P,R=R==s?r:R,i=i?i:{};var m=i.top,g=i.bottom,A=i.left,$=i.right,f=i.front,O=i.back,a=[],o=[];return f===!0?(a.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),o.push(0,0,0,1,1,1,1,1,1,0,0,0)):f===!1||(a.push(-.5,.5,.5,-.5,-.5,.5,-.5+r,-.5,.5,-.5+r,-.5,.5,-.5+r,.5,.5,-.5,.5,.5,.5-r,.5,.5,.5-r,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-r,.5,.5,-.5+r,.5,.5,-.5+r,.5-P,.5,.5-r,.5-P,.5,.5-r,.5-P,.5,.5-r,.5,.5,-.5+r,.5,.5,-.5+r,-.5+P,.5,-.5+r,-.5,.5,.5-r,-.5,.5,.5-r,-.5,.5,.5-r,-.5+P,.5,-.5+r,-.5+P,.5),o.push(0,0,0,1,r,1,r,1,r,0,0,0,1-r,0,1-r,1,1,1,1,1,1,0,1-r,0,r,0,r,P,1-r,P,1-r,P,1-r,0,r,0,r,1-P,r,1,1-r,1,1-r,1,1-r,1-P,r,1-P)),O===!0?(a.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),o.push(1,0,0,1,1,1,0,1,1,0,0,0)):O===!1||(a.push(-.5,.5,-.5,-.5+r,-.5,-.5,-.5,-.5,-.5,-.5+r,-.5,-.5,-.5,.5,-.5,-.5+r,.5,-.5,.5-r,.5,-.5,.5,-.5,-.5,.5-r,-.5,-.5,.5,-.5,-.5,.5-r,.5,-.5,.5,.5,-.5,-.5+r,.5,-.5,.5-r,.5-P,-.5,-.5+r,.5-P,-.5,.5-r,.5-P,-.5,-.5+r,.5,-.5,.5-r,.5,-.5,-.5+r,-.5+P,-.5,.5-r,-.5,-.5,-.5+r,-.5,-.5,.5-r,-.5,-.5,-.5+r,-.5+P,-.5,.5-r,-.5+P,-.5),o.push(1,0,1-r,1,1,1,1-r,1,1,0,1-r,0,r,0,0,1,r,1,0,1,r,0,0,0,1-r,0,r,P,1-r,P,r,P,1-r,0,r,0,1-r,1-P,r,1,1-r,1,r,1,1-r,1-P,r,1-P)),A===!0?(a.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),o.push(0,0,0,1,1,1,1,1,1,0,0,0)):A===!1||(a.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+R,-.5,-.5,-.5+R,-.5,.5,-.5+R,-.5,.5,-.5,-.5,.5,.5-R,-.5,-.5,.5-R,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-R,-.5,.5,-.5+R,-.5,.5-P,-.5+R,-.5,.5-P,.5-R,-.5,.5-P,.5-R,-.5,.5,.5-R,-.5,.5,-.5+R,-.5,-.5+P,-.5+R,-.5,-.5,-.5+R,-.5,-.5,.5-R,-.5,-.5,.5-R,-.5,-.5+P,.5-R,-.5,-.5+P,-.5+R),o.push(0,0,0,1,R,1,R,1,R,0,0,0,1-R,0,1-R,1,1,1,1,1,1,0,1-R,0,R,0,R,P,1-R,P,1-R,P,1-R,0,R,0,R,1-P,R,1,1-R,1,1-R,1,1-R,1-P,R,1-P)),$===!0?(a.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),o.push(1,0,0,1,1,1,0,1,1,0,0,0)):$===!1||(a.push(.5,.5,-.5,.5,-.5,-.5+R,.5,-.5,-.5,.5,-.5,-.5+R,.5,.5,-.5,.5,.5,-.5+R,.5,.5,.5-R,.5,-.5,.5,.5,-.5,.5-R,.5,-.5,.5,.5,.5,.5-R,.5,.5,.5,.5,.5,-.5+R,.5,.5-P,.5-R,.5,.5-P,-.5+R,.5,.5-P,.5-R,.5,.5,-.5+R,.5,.5,.5-R,.5,-.5+P,-.5+R,.5,-.5,.5-R,.5,-.5,-.5+R,.5,-.5,.5-R,.5,-.5+P,-.5+R,.5,-.5+P,.5-R),o.push(1,0,1-R,1,1,1,1-R,1,1,0,1-R,0,R,0,0,1,R,1,0,1,R,0,0,0,1-R,0,R,P,1-R,P,R,P,1-R,0,R,0,1-R,1-P,R,1,1-R,1,R,1,1-R,1-P,R,1-P)),m===!0?(a.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),o.push(1,1,1,0,0,0,0,0,0,1,1,1)):m===!1||(a.push(.5,.5,.5,.5,.5,-.5,.5-r,.5,-.5,.5-r,.5,-.5,.5-r,.5,.5,.5,.5,.5,-.5+r,.5,.5,-.5+r,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+r,.5,.5,.5-r,.5,.5,.5-r,.5,.5-R,-.5+r,.5,.5-R,-.5+r,.5,.5-R,-.5+r,.5,.5,.5-r,.5,.5,.5-r,.5,-.5+R,.5-r,.5,-.5,-.5+r,.5,-.5,-.5+r,.5,-.5,-.5+r,.5,-.5+R,.5-r,.5,-.5+R),o.push(1,1,1,0,1-r,0,1-r,0,1-r,1,1,1,r,1,r,0,0,0,0,0,0,1,r,1,1-r,1,1-r,1-R,r,1-R,r,1-R,r,1,1-r,1,1-r,R,1-r,0,r,0,r,0,r,R,1-r,R)),g===!0?(a.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),o.push(1,0,0,1,1,1,0,1,1,0,0,0)):g===!1||(a.push(.5,-.5,.5,.5-r,-.5,-.5,.5,-.5,-.5,.5-r,-.5,-.5,.5,-.5,.5,.5-r,-.5,.5,-.5+r,-.5,.5,-.5,-.5,-.5,-.5+r,-.5,-.5,-.5,-.5,-.5,-.5+r,-.5,.5,-.5,-.5,.5,.5-r,-.5,.5,-.5+r,-.5,.5-R,.5-r,-.5,.5-R,-.5+r,-.5,.5-R,.5-r,-.5,.5,-.5+r,-.5,.5,.5-r,-.5,-.5+R,-.5+r,-.5,-.5,.5-r,-.5,-.5,-.5+r,-.5,-.5,.5-r,-.5,-.5+R,-.5+r,-.5,-.5+R),o.push(1,0,1-r,1,1,1,1-r,1,1,0,1-r,0,r,0,0,1,r,1,0,1,r,0,0,0,1-r,0,r,R,1-r,R,r,R,1-r,0,r,0,1-r,1-R,r,1,1-r,1,r,1,1-r,1-R,r,1-R)),{vs:a,uv:o}}}),n(D.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":h,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":C/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),$g.forEach(function(u){var O={};O[u+t]=!1,O[u+".toggleable"]=!1,O[u+".axis"]=R,O[u+".start"]=0,O[u+".end"]=C/2,O[u+K]=0,n(D.Style,O,!0)});var Cj=function(){this.$4n=[]};Cj.$15n=function(o){var D=new Cj;return D.$4n=o,D},Cj.prototype={clone:function(){var Y=new Cj;return Y.$4n=this.$4n.map(function(D){return D.clone()}),Y},$19n:function(){return this.$4n},union:function(D){var Y=new eq(this.clone().$4n),C=new eq(D.clone().$4n);return Y.$3n(C),C.$3n(Y),C.$6n(),C.$3n(Y),C.$6n(),Y.$7n(C.$2n()),Cj.$15n(Y.$2n())},subtract:function(P){var G=new eq(this.clone().$4n),e=new eq(P.clone().$4n);return G.$6n(),G.$3n(e),e.$3n(G),e.$6n(),e.$3n(G),e.$6n(),G.$7n(e.$2n()),G.$6n(),Cj.$15n(G.$2n())},intersect:function(L){var S=new eq(this.clone().$4n),d=new eq(L.clone().$4n);return S.$6n(),d.$3n(S),d.$6n(),S.$3n(d),d.$3n(S),S.$7n(d.$2n()),S.$6n(),Cj.$15n(S.$2n())},inverse:function(){var r=this.clone();return r.$4n.map(function(L){L.flip()}),r}},Cj.cube=function(f){f=f||{};var L=new Yc(f.center||[0,0,0]),q=f.radius?f.radius.length?f.radius:[f.radius,f.radius,f.radius]:[1,1,1];return Cj.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function($){return new Ll($[0].map(function(c){var G=new Yc(L.x+q[0]*(2*!!(1&c)-1),L.y+q[1]*(2*!!(2&c)-1),L.z+q[2]*(2*!!(4&c)-1));return new qq(G,new Yc($[1]))}))}))},Cj.sphere=function(t){function G(K,G){K*=2*C,G*=C;var g=new Yc(M(K)*q(G),M(G),q(K)*q(G));k.push(new qq(p.$20n(g.$21n(e)),g))}t=t||{};for(var k,p=new Yc(t.center||[0,0,0]),e=t.radius||1,F=t.slices||16,u=t.stacks||8,i=[],o=0;F>o;o++)for(var h=0;u>h;h++)k=[],G(o/F,h/u),h>0&&G((o+1)/F,h/u),u-1>h&&G((o+1)/F,(h+1)/u),G(o/F,(h+1)/u),i.push(new Ll(k));return Cj.$15n(i)},Cj.cylinder=function(p){function U(w,c,r){var O=2*c*C,L=$.$21n(M(O)).$20n(y.$21n(q(O))),T=J.$20n(k.$21n(w)).$20n(L.$21n(W)),H=L.$21n(1-E(r)).$20n(e.$21n(r));return new qq(T,H)}p=p||{};for(var J=new Yc(p.start||[0,-1,0]),u=new Yc(p.end||[0,1,0]),k=u.$13n(J),W=p.radius||1,Z=p.slices||16,e=k.$14n(),Y=E(e.y)>.5,$=new Yc(Y,!Y,0).$12n(e).$14n(),y=$.$12n(e).$14n(),A=new qq(J,e.$11n()),r=new qq(u,e.$14n()),Q=[],n=0;Z>n;n++){var o=n/Z,g=(n+1)/Z;Q.push(new Ll([A,U(0,o,-1),U(0,g,-1)])),Q.push(new Ll([U(0,g,0),U(0,o,0),U(1,o,0),U(1,g,0)])),Q.push(new Ll([r,U(1,g,1),U(1,o,1)]))}return Cj.$15n(Q)};var Yc=function(p,O,z){var y=this;3==arguments.length?(y.x=p,y.y=O,y.z=z):"x"in p?(y.x=p.x,y.y=p.y,y.z=p.z):(y.x=p[0],y.y=p[1],y.z=p[2])};Yc.prototype={clone:function(){return new Yc(this.x,this.y,this.z)},$11n:function(){return new Yc(-this.x,-this.y,-this.z)},$20n:function(p){return new Yc(this.x+p.x,this.y+p.y,this.z+p.z)},$13n:function(c){return new Yc(this.x-c.x,this.y-c.y,this.z-c.z)},$21n:function(f){return new Yc(this.x*f,this.y*f,this.z*f)},$16n:function(K){return new Yc(this.x/K,this.y/K,this.z/K)},$23n:function(E){return this.x*E.x+this.y*E.y+this.z*E.z},lerp:function(r,q){return this.$20n(r.$13n(this).$21n(q))},length:function(){return Z(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(e){var B=this;return new Yc(B.y*e.z-B.z*e.y,B.z*e.x-B.x*e.z,B.x*e.y-B.y*e.x)}};var qq=function(D,m,A){var r=this;r.$24n=new Yc(D),r.$22n=new Yc(m),r.uv=A?new Yc(A):null};qq.prototype={clone:function(){var e=this;return new qq(e.$24n.clone(),e.$22n.clone(),e.uv?e.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(M,e){var w=this;return new qq(w.$24n.lerp(M.$24n,e),w.$22n.lerp(M.$22n,e),w.uv?w.uv.lerp(M.uv,e):null)}};var Hq=function(b,B){this.$22n=b,this.w=B};Hq.$17n=function(g,T,$){var W=T.$13n(g).$12n($.$13n(g)).$14n();return new Hq(W,W.$23n(g))},Hq.prototype={clone:function(){return new Hq(this.$22n.clone(),this.w)},flip:function(){var y=this;y.$22n=y.$22n.$11n(),y.w=-y.w},$5n:function(P,Q,E,k,f){for(var B=this,R=0,x=1,d=2,Z=3,Y=0,T=[],e=0;e<P.$9n.length;e++){var r=B.$22n.$23n(P.$9n[e].$24n)-B.w,I=-l>r?d:r>l?x:R;Y|=I,T.push(I)}switch(Y){case R:(B.$22n.$23n(P.$8n.$22n)>0?Q:E).push(P);break;case x:k.push(P);break;case d:f.push(P);break;case Z:for(var s=[],J=[],e=0;e<P.$9n.length;e++){var H=(e+1)%P.$9n.length,w=T[e],G=T[H],o=P.$9n[e],i=P.$9n[H];if(w!=d&&s.push(o),w!=x&&J.push(w!=d?o.clone():o),(w|G)==Z){var r=(B.w-this.$22n.$23n(o.$24n))/B.$22n.$23n(i.$24n.$13n(o.$24n)),t=o.$18n(i,r);s.push(t),J.push(t.clone())}}s.length>=3&&k.push(new Ll(s,P.$10n)),J.length>=3&&f.push(new Ll(J,P.$10n))}}};var Ll=function(D,R){var A=this;A.$9n=D,A.$10n=R,A.$8n=Hq.$17n(D[0].$24n,D[1].$24n,D[2].$24n)};Ll.prototype={clone:function(){var r=this.$9n.map(function(i){return i.clone()});return new Ll(r,this.$10n)},flip:function(){this.$9n.reverse().map(function(L){L.flip()}),this.$8n.flip()}};var eq=function(E){var l=this;l.$8n=null,l.front=null,l.back=null,l.$4n=[],E&&l.$7n(E)};eq.prototype={clone:function(){var M=this,b=new eq;return b.$8n=M.$8n&&M.$8n.clone(),b.front=M.front&&M.front.clone(),b.back=M.back&&M.back.clone(),b.$4n=M.$4n.map(function(J){return J.clone()}),b},$6n:function(){for(var N=this,V=0;V<N.$4n.length;V++)N.$4n[V].flip();N.$8n.flip(),N.front&&N.front.$6n(),N.back&&N.back.$6n();var U=N.front;N.front=N.back,N.back=U},$1n:function(V){var Q=this;if(!Q.$8n)return V.slice();for(var k=[],m=[],X=0;X<V.length;X++)Q.$8n.$5n(V[X],k,m,k,m);return Q.front&&(k=Q.front.$1n(k)),m=Q.back?Q.back.$1n(m):[],k.concat(m)},$3n:function(Z){var K=this;K.$4n=Z.$1n(K.$4n),K.front&&K.front.$3n(Z),K.back&&K.back.$3n(Z)},$2n:function(){var p=this,k=p.$4n.slice();return p.front&&(k=k.concat(p.front.$2n())),p.back&&(k=k.concat(p.back.$2n())),k},$7n:function(e){var R=this;if(e.length){R.$8n||(R.$8n=e[0].$8n.clone());for(var a=[],S=[],P=0;P<e.length;P++)this.$8n.$5n(e[P],R.$4n,R.$4n,a,S);a.length&&(R.front||(R.front=new eq),this.front.$7n(a)),S.length&&(R.back||(R.back=new eq),R.back.$7n(S))}}};var Ue="symbol",Jl=D.Symbol=function(Y,U,q){var n=this;p(Jl,n),n.s3(20,20,20),n.s({"all.visible":!1,shape:"rect"}),n.setIcon(Y,U,q)};W("Symbol",I,{setIcon:function(O,$,L){var w,A=this;return Jl.superClass.setIcon.call(A,O),O?(w={for3d:!0,face:"center",position:44,names:[O]},L&&(w.transaprent=!0),$&&(w.autorotate=$),A.addStyleIcon(Ue,w)):A.removeStyleIcon(Ue),A.setWidth(x.getImageWidth(Q.getImage(O),A)||20),w}});var nn=D.CSGNode=function(){p(nn,this),this.s({shape:"rect","attach.thickness":1.001})},mh={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};W("CSGNode",I,{_22Q:function(){return Zi},onPropertyChanged:function($){var g=this,n=g.getHost();nn.superClass.onPropertyChanged.call(g,$),mh[$.property]&&(n instanceof So||n instanceof nn)&&n.fp("csgNodeChange",!0,!1)}});var Zi=function(N,s){p(Zi,this,[N,s])};u(Zi,F.Node3dUI,{_80o:function(E,B,C){var z=this;z._shape3d?Zi.superClass._80o.call(z,E,B,C):(i(z.gv),Rd.forEach(function(F){o(z,E,B,z[F],C)}))},validate:function(K,Q){var j=this,h=j.gv,s=j.data;if(s.s("shape3d"))return Zi.superClass.validate.call(j,K,Q),j._shape3d=!0,void 0;j._shape3d=!1;var l=T(s,h.getMat(s)),C=K&&K.uv;j.vf2("csg",C);for(var o=0;6>o;o++)for(var G=$g[o],n=em[o],M=j.vf2(G,C,Q),v=M.mat||l,I=M.vs,J=M.uv,H=M.tuv,g=0;2>g;g++){var z=A[n+3*g],F=A[n+3*g+1],t=A[n+3*g+2];if($(I,v,[f[3*z],f[3*z+1],f[3*z+2]]),$(I,v,[f[3*F],f[3*F+1],f[3*F+2]]),$(I,v,[f[3*t],f[3*t+1],f[3*t+2]]),H)if(J){var N=8*o;H.push(J[2*z-N],J[2*z+1-N],J[2*F-N],J[2*F+1-N],J[2*t-N],J[2*t+1-N])}else H.push(X[2*z],X[2*z+1],X[2*F],X[2*F+1],X[2*t],X[2*t+1])}jl(j,K,Q)},vf2:function(w,t,V){var d,g=this,a=g.gv.getFaceVisible(g.data,w);return d=y(g,w,V),d.vs=[],d.tuv=a&&(d.texture||t)?[]:s,d.visible=a,d}});var So=D.CSGShape=function(){var I=this;p(So,I),I.s({"shape.background":s,"shape.border.width":8}),I.setTall(240),I.setElevation(120),I.setThickness(14)};W("CSGShape",r,{IRotatable:!1,_22Q:function(){return Rg},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Rg=function(u,E){p(Rg,this,[u,E])};u(Rg,F.Shape3dUI,{_80o:function(_,s,Z){var u=this;u.undrawable||(i(u.gv),Rd.forEach(function(h){o(u,_,s,u[h],Z)}))},validate:function(e,U){var q=this,A=q.data,F=A.getPoints();if(q.undrawable=F.size()<2)return q.clear(),void 0;var Q=A.isClosePath(),k=v(A._thickness/2,l),o=a(F,s,s,Q);Rd.forEach(function(Y){q.vf(Y,e&&e.uv,!0,U)}),Q&&(q.left.visible=!1,q.right.visible=!1),q._12O(o,k),q._20Q(o),jl(q,e,U)}});var yi=D.DoorWindow=function(){var J=this;p(yi,J),J.setElevation(100),J.s3(100,200,14)};W("DoorWindow",nn,{IDoorWindow:!0,toggle:function(R){this.setExpanded(!this.s(_),R)},isExpanded:function(){return this.s(_)},setExpanded:function(M,r){var o,q=this,h=q.$25n,K=q.getDataModel(),l=q.s(_);if(K&&(o=K.getHistoryManager()),h&&(h.stop(!0),delete q.$25n),l!==M){o&&o.beginInteraction();var P=M?q.s("dw.end"):q.s("dw.start");q.s(_,M),r=N(r),r?(l=q.s(g),r.action=function(B){q.s(g,l+(P-l)*B)},r.finishFunc=function(){o&&o.endInteraction()},q.$25n=U(r)):(q.s(g,P),o&&o.endInteraction())}},getMat:function(){var $=this,L=$.s("dw.s3"),o=$.s("dw.t3"),Q=$.s("dw.flip"),z=$.s(g);if(L||z||o||Q){var u=[];if(Q&&u.push({r3:[0,C,0]}),L&&u.push({s3:L}),z){L=$.s3();var x=$.s("dw.axis"),w=L[0]/2,G=L[1]/2;L[2]/2,x===R?u.push({t3:[w,0,0]},{r3:[0,-z,0]},{t3:[-w,0,0]}):x===j?u.push({t3:[-w,0,0]},{r3:[0,z,0]},{t3:[w,0,0]}):x===V?u.push({t3:[0,-G,0]},{r3:[-z,0,0]},{t3:[0,G,0]}):x===e?u.push({t3:[0,G,0]},{r3:[z,0,0]},{t3:[0,-G,0]}):x===P?u.push({r3:[0,z,0]}):x===B&&u.push({r3:[z,0,0]})}return o&&u.push({t3:o}),H(u)}return s}});var Wr=D.CSGBox=function(){var y=this;p(Wr,y),y.setElevation(100),y.s3(100,200,100)};W("CSGBox",nn,{ICSGBox:!0,toggleFace:function(u,z){this.setFaceExpanded(u,!this.s(u+t),z)},isFaceExpanded:function(u){return this.s(u+t)},setFaceExpanded:function($,R,j){var H=this,Q=H.$25n,w=H.s($+t);if(Q&&(Q.stop(!0),delete H.$25n),w!==R){var M=R?H.s($+".end"):H.s($+".start");H.s($+t,R),j=N(j),j?(w=H.s($+K),j.action=function(B){H.s($+K,w+(M-w)*B)},H.$25n=U(j)):H.s($+K,M)}},getFaceMat:function(Q){var t=this,z=t.s(Q+K);if(!z)return s;var n=t.s(Q+".axis"),O=t.s3(),L=O[0]/2,m=O[1]/2,c=O[2]/2,C=[];return Q===J&&(n===R?C.push({t3:[L,0,-c]},{r3:[0,-z,0]},{t3:[-L,0,c]}):n===j?C.push({t3:[-L,0,-c]},{r3:[0,z,0]},{t3:[L,0,c]}):n===V?C.push({t3:[0,-m,-c]},{r3:[-z,0,0]},{t3:[0,m,c]}):n===e?C.push({t3:[0,m,-c]},{r3:[z,0,0]},{t3:[0,-m,c]}):n===P?C.push({t3:[0,0,-c]},{r3:[0,z,0]},{t3:[0,0,c]}):n===B&&C.push({t3:[0,0,-c]},{r3:[z,0,0]},{t3:[0,0,c]})),Q===w&&(n===R?C.push({t3:[-L,0,c]},{r3:[0,-z,0]},{t3:[L,0,-c]}):n===j?C.push({t3:[L,0,c]},{r3:[0,z,0]},{t3:[-L,0,-c]}):n===V?C.push({t3:[0,-m,c]},{r3:[z,0,0]},{t3:[0,m,-c]}):n===e?C.push({t3:[0,m,c]},{r3:[-z,0,0]},{t3:[0,-m,-c]}):n===P?C.push({t3:[0,0,c]},{r3:[0,z,0]},{t3:[0,0,-c]}):n===B&&C.push({t3:[0,0,c]},{r3:[z,0,0]},{t3:[0,0,-c]})),Q===R&&(n===R?C.push({t3:[L,0,c]},{r3:[0,-z,0]},{t3:[-L,0,-c]}):n===j?C.push({t3:[L,0,-c]},{r3:[0,z,0]},{t3:[-L,0,c]}):n===V?C.push({t3:[L,-m,0]},{r3:[0,0,-z]},{t3:[-L,m,0]}):n===e?C.push({t3:[L,m,0]},{r3:[0,0,z]},{t3:[-L,-m,0]}):n===P?C.push({t3:[L,0,0]},{r3:[0,z,0]},{t3:[-L,0,0]}):n===B&&C.push({t3:[L,0,0]},{r3:[0,0,z]},{t3:[-L,0,0]})),Q===j&&(n===R?C.push({t3:[-L,0,-c]},{r3:[0,-z,0]},{t3:[L,0,c]}):n===j?C.push({t3:[-L,0,c]},{r3:[0,z,0]},{t3:[L,0,-c]}):n===V?C.push({t3:[-L,-m,0]},{r3:[0,0,z]},{t3:[L,m,0]}):n===e?C.push({t3:[-L,m,0]},{r3:[0,0,-z]},{t3:[L,-m,0]}):n===P?C.push({t3:[-L,0,0]},{r3:[0,z,0]},{t3:[L,0,0]}):n===B&&C.push({t3:[-L,0,0]},{r3:[0,0,z]},{t3:[L,0,0]})),Q===V&&(n===R?C.push({t3:[L,-m,0]},{r3:[0,0,z]},{t3:[-L,m,0]}):n===j?C.push({t3:[-L,-m,0]},{r3:[0,0,-z]},{t3:[L,m,0]}):n===V?C.push({t3:[0,-m,c]},{r3:[-z,0,0]},{t3:[0,m,-c]}):n===e?C.push({t3:[0,-m,-c]},{r3:[z,0,0]},{t3:[0,m,c]}):n===P?C.push({t3:[0,-m,0]},{r3:[0,0,z]},{t3:[0,m,0]}):n===B&&C.push({t3:[0,-m,0]},{r3:[z,0,0]},{t3:[0,m,0]})),Q===e&&(n===R?C.push({t3:[L,m,0]},{r3:[0,0,-z]},{t3:[-L,-m,0]}):n===j?C.push({t3:[-L,m,0]},{r3:[0,0,z]},{t3:[L,-m,0]}):n===V?C.push({t3:[0,m,-c]},{r3:[-z,0,0]},{t3:[0,-m,c]}):n===e?C.push({t3:[0,m,c]},{r3:[z,0,0]},{t3:[0,-m,-c]}):n===P?C.push({t3:[0,m,0]},{r3:[0,0,z]},{t3:[0,-m,0]}):n===B&&C.push({t3:[0,m,0]},{r3:[z,0,0]},{t3:[0,-m,0]})),H(C)}})}(this,Object);