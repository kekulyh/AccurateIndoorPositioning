!function(g,I,T){"use strict";var U="ht",L=g[U],$=L.Default,R=L.graph,p=$.getInternal(),k=p.ui(),l=k.NodeUI.prototype,S=k.ShapeUI.prototype,r=R.GraphView,J=r.prototype,M=k.EdgeUI.prototype,W=L.Node,w=L.Shape,X=L.Edge,Y=L.Group,_=$.isTouchable,E=$.preventDefault,D=g.setTimeout,q=$.grow,d=$.isDragging,i=$.getDistance,z=null,A=L.List,a="undefined"!=typeof Float32Array?Float32Array:Array,P=Math,C=P.PI,f="Crossing",N="No Crossing",Z=C/2,Q=2*C,m=P.atan2,y=P.sqrt,e=P.pow,x=P.sin,h=P.cos,n=P.min,s=P.max,V=P.abs,u=P.ceil,o=P.round,j=$.unionPoint,c=$.unionRect,K=$.containsPoint,b=$.clone,v="rgb(52, 152, 219)",H="red",t={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},F={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var s=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],q=0;q<s.length;q++){var c=s[q];c=0===q%2?c/400*F.width:c/100*F.height,s[q]=c}return F.width>120&&(s[4]=F.width-26,s[6]=F.width-40,s[10]=F.width-40,s[12]=F.width-26,s[18]=33),s}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},B={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:v,rotation:.61},{type:"circle",rect:[200,120,70,70],background:v,rotation:.61},{type:"circle",rect:[200,220,70,70],background:v,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:v},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:v}]},O={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:H,rotation:.61}]},G={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:v},{type:"circle",rect:[0,210,90,90],background:v},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:v}]},Sj={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:H},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:H}]},Bb={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:v}]},Ei={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:H}]},Il={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},Nj={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Mj=function(o){var P=o.touches[0];return P?P:o.changedTouches[0]},wh=function(J,A,G,x){return m(x-A,G-J)},sn=function(e,H){return{x:e.x*H,y:e.y*H}},ag=function(S,R){var O,b,M,F,s=S._layers,y=S.sm().getSelection()._as,G=y.length;if(s)for(O=0;O<s.length;O++){F=s[O];for(var k=0;G>k;k++)if(b=y[k],b._layer===F&&(M=R(b),M===!1))return}else for(O=0;G>O;O++)if(b=y[O],M=R(b),M===!1)return},Rj=function(W,k,S){var C,l,V,D,X,N=this,b=k,d=N.gv;if(W instanceof w){V=W.getSegments();var G=d.getDataUI(W);X=G._55O.$15l,V||(V=fs(X)),W.isClosePath()&&V.indexOf(5)<0&&(V=new A(V._as),V.add(5)),C=Lk(W,G,b),l=X[C]}else{var u=d.getDataUI(W);X=Zd(u,W.s("edge.points")),V=W.s("edge.segments"),V||(V=fs(X)),X=X._as,C=Lk(W,u,b),l=X[C]}if(V&&(D=V.get(b)),2===D||1===D||5===D){var r=X[C+1];5===D&&(r=X[0]);var Z=xi(l,S,r);return Z}return S},Zi=function(F,n){var O,b,d,X,o=F._layers,B=F.sm().getSelection()._as,l=B.length;if(o)for(O=o.length-1;O>=0;O--){X=o[O];for(var h=l-1;h>=0;h--)if(b=B[h],b._layer===X&&(d=n(b),d===!1))return}else for(O=l-1;O>=0;O--)if(b=B[O],d=n(b),d===!1)return},Qp=function(E,t,L,N){var e=t/2,c=L/2,q=Jc(E,-e,-c,N),l=Jc(E,e,-c,N),O=Jc(E,-e,c,N),z=Jc(E,e,c,N),g=Jc(E,0,-c,N),X=Jc(E,e,0,N),T=Jc(E,0,c,N),w=Jc(E,-e,0,N);return[q,l,O,z,g,X,T,w]},xi=function(B,P,U){var v={x:P.x-B.x,y:P.y-B.y},M={x:U.x-B.x,y:U.y-B.y},d=y(e(U.x-B.x,2)+e(U.y-B.y,2)),S={x:M.x/d,y:M.y/d},z=v.x*S.x+v.y*S.y,D={x:S.x*z,y:S.y*z};return{x:B.x+D.x,y:B.y+D.y}},Jc=function(A,g,P,q){var i=h(q)*g-x(q)*P,b=x(q)*g+h(q)*P;return A?{x:A.x+i,y:A.y+b}:{x:i,y:b}},aj=function(A,h){return h>2*A?A:h/2},Nb=function(v,r,y,f){var h=i(v,r);return y=f?n(y,h):aj(y,h),h?y/=h:y=0,{x:v.x+(r.x-v.x)*y,y:v.y+(r.y-v.y)*y}},ad=function(N,i,H,j,W){return i?(H=p.getPosition(H,p.getNodeRect(N,i)),H.x+=j||0,H.y+=W||0,H):z},Nc=function(N,i){var Y,z,W=N.gv,D=N._data,y=D._40I,s=D._41I,x=D.s("edge.offset"),U=D.s("edge.source.position"),P=D.s("edge.target.position"),M=D.s("edge.source.offset.x"),j=D.s("edge.source.offset.y"),r=D.s("edge.target.offset.x"),E=D.s("edge.target.offset.y");if(i?(Y=ad(W,y,U,M,j),z=ad(W,s,P,r,E)):(Y=ad(W,y,U),z=ad(W,s,P)),"points"===D.s("edge.type")&&x&&!D.s("edge.center")&&Y){var S=D.s("edge.points")||new A,Z=S.size(),G=Nb(Y,Z?S.get(0):z,x,Z),a=Nb(z,Z?S.get(Z-1):Y,x,Z);Y=G,z=a}return[Y,z]},Zd=function(Z,m,D){var K=Z._78o,X=Z._data,E=X.s("edge.type"),I=[K._69o,K._70o];return"points"===E?D&&(I=Nc(Z)):I=K.center?E?D?Nc(Z):Nc(Z,!0):D?Nc(Z):[K.c1,K.c2]:D?Nc(Z):Nc(Z,!0),m=new A(m?m._as:z),m.add(I[0],0),m.add(I[1]),m},th=function(y){return y=new A(y._as),y.removeAt(0),y.removeAt(y.size()-1),y},fs=function(q){q._as||(q=new A(q));var p=new A;p.add(1);for(var m=1;m<q.size();m++)p.add(2);return p},fg=function(W,P){return{x:(W.x+P.x)/2,y:(W.y+P.y)/2}},Ui=function(e,O){return{x:e.x+1*(O.x-e.x)/4,y:e.y+1*(O.y-e.y)/4}},rm=function(a,G){return{x:a.x+3*(G.x-a.x)/4,y:a.y+3*(G.y-a.y)/4}},Ob=function(Q,d,Y,i){var k=d.x+d.width/2,V=d.y+d.height/2,p=y(k*k+V*V),N=m(V,k)+Y;return{x:i.x+p*h(N),y:i.y+p*x(N)}},Vo=J.validateImpl,yf=J.isRectEditable,Cd=J.isPointEditable,vj=J._42,Gn=S._79o,Pn=M._79o,tp=S._48O,of=S._47O,xm=l._48O,Sd=l._80o,ph=S._80o,ni=l._2o,en=l._47O,sh=M._47O,Fj=J.isEditable,vg=["northwest","north","northeast","east","southeast","south","southwest","west"],Pp=function(G,D,P,g,I,h,C,L,T,w){var H=G.x,O=G.y,M=G.width,b=G.height,u={x:H+M/2,y:O+b/2};g=g||0,D=Jc(u,D.x-u.x,D.y-u.y,-g),C&&!L&&(D.x+=T,D.y+=w);var S=.01;if("northwest"===P?(D.x+I>H+M-S&&(D.x=H+M-I-S),D.y+I>O+b-S&&(D.y=O+b-I-S),G=j(D,{x:H+M,y:O+b})):"north"===P?(D.y+I>O+b-S&&(D.y=O+b-I-S),G=j({x:H,y:D.y},{x:H+M,y:O+b})):"northeast"===P?(D.x<H+I+S&&(D.x=H+I+S),D.y+I>O+b-S&&(D.y=O+b-I-S),G=j({x:H,y:D.y},{x:D.x,y:O+b})):"west"===P?(D.x+I>H+M-S&&(D.x=H+M-I-S),G=j({x:D.x,y:O},{x:H+M,y:O+b})):"east"===P?(D.x<H+I+S&&(D.x=H+I+S),G=j({x:H,y:O},{x:D.x,y:O+b})):"southwest"===P?(D.x+I>H+M-S&&(D.x=H+M-I-S),D.y<O+I+S&&(D.y=O+I+S),G=j({x:D.x,y:O},{x:H+M,y:D.y})):"south"===P?(D.y<O+I+S&&(D.y=O+I+S),G=j({x:H,y:O},{x:H+M,y:D.y})):"southeast"===P&&(D.x<H+I+S&&(D.x=H+I+S),D.y<O+I+S&&(D.y=O+I+S),G=j({x:H,y:O},D)),"keepRatio"===h&&(!C&&L||C&&!L)&&("northeast"===P||"southeast"===P||"northwest"===P||"southwest"===P)){var i=G.width,Z=G.height,m=i/M,_=Z/b,f=n(m,_);G.width=M*f,G.height=b*f,"northeast"===P?G.y=O+(b-G.height):"northwest"===P?(G.y=O+(b-G.height),G.x=H+(M-G.width)):"southwest"===P&&(G.x=H+(M-G.width))}G.x-=u.x,G.y-=u.y;var W=Ob(z,G,g,u);return G.x=W.x-G.width/2,G.y=W.y-G.height/2,G},Cp=function(n,g,O,L){var b=n.getRotation(),a=g,y=a.x,u=a.y,U=a.width,i=a.height,o={x:y+a.width/2,y:u+a.height/2};L=Jc(o,L.x-o.x,L.y-o.y,-b),"northwest"===O?a=j(L,{x:y+U,y:u+i}):"north"===O?a=j({x:y,y:L.y},{x:y+U,y:u+i}):"northeast"===O?a=j({x:y,y:L.y},{x:L.x,y:u+i}):"west"===O?a=j({x:L.x,y:u},{x:y+U,y:u+i}):"east"===O?a=j({x:y,y:u},{x:L.x,y:u+i}):"southwest"===O?a=j({x:L.x,y:u},{x:y+U,y:L.y}):"south"===O?a=j({x:y,y:u},{x:y+U,y:L.y}):"southeast"===O&&(a=j({x:y,y:u},L)),n.setRect(a),a.x-=o.x,a.y-=o.y;var Z=Ob(n,a,b,o);n.p(Z.x,Z.y)},nk=function($,D,y,f,b,i,t,S){var s=z;i?(s=Jc(z,b.x-D.x,b.y-D.y,-y),s.x-=t.x,s.y-=t.y):s=Jc(z,b.x-D.x,b.y-D.y,0);var L={x:D.x+s.x,y:D.y+s.y};S&&(L=S(L.x,L.y)),L.e=$.getPoints().get(f).e,$.setPoint(f,L);var w=$.getWidth(),k=$.getHeight(),u=$.p().x-w/2,N=$.p().y-k/2;u-=D.x,N-=D.y;var h=Ob($,{x:u,y:N,width:w,height:k},y,D);$.p(h.x,h.y)},Lk=function(V,J,D){var F,Z;if(V instanceof w?(F=V.getPoints(),Z=V.getSegments()):V instanceof X&&"points"===V.s("edge.type")&&(F=V.s("edge.points"),Z=V.s("edge.segments"),F=Zd(J,F)),Z||(Z=fs(F)),V instanceof w&&V.isClosePath()&&Z.indexOf(5)<0&&(Z=new A(Z._as),Z.add(5)),Z)for(var u=-1,k=0;k<Z.size();k++){if(k===D)return u;var e=Z.get(k);1===e?u+=1:2===e?u+=1:3===e?u+=2:4===e&&(u+=3)}},xo=function(m,O,N){var J,b;if(m instanceof w?(J=m.getPoints(),b=m.getSegments()):m instanceof X&&"points"===m.s("edge.type")&&(J=m.s("edge.points"),b=m.s("edge.segments"),J=Zd(O,J)),b||(b=fs(J)),b)for(var _=-1,g=0;g<b.size();g++){var i=b.get(g);if(1===i?_+=1:2===i?_+=1:3===i?_+=2:4===i&&(_+=3),_===N)return g}},Ke=function(P,x){var o=[P[0]-x[0],P[1]-x[1],P[2]-x[2]];return o},Fp=function(){var S=new a(16);return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},cd=function(r,g){var o=r[0],A=r[1],e=r[2];return r[0]=g[0]*o+g[4]*A+g[8]*e+g[12],r[1]=g[1]*o+g[5]*A+g[9]*e+g[13],r[2]=g[2]*o+g[6]*A+g[10]*e+g[14],r},jm=function(W,z){if(z){var Y=x(z),m=h(z),T=W[0],f=W[1],j=W[2],o=W[3],$=W[8],Q=W[9],M=W[10],C=W[11];W[0]=T*m-$*Y,W[1]=f*m-Q*Y,W[2]=j*m-M*Y,W[3]=o*m-C*Y,W[8]=T*Y+$*m,W[9]=f*Y+Q*m,W[10]=j*Y+M*m,W[11]=o*Y+C*m}},Gk=function(F,X){for(var v=F.s("grid.row.count"),l=F.s("grid.column.count"),C=0;v>C;C++)for(var V=0;l>V;V++){var i=F.getCellRect(C,V);if(K(i,X))return{rowIndex:C,columnIndex:V,rect:i,grid:F}}return null},Zf=function(M,H,Y,E,h,R){var Q={},Z=Y-M,X=E-H,i=P.sqrt(Z*Z+X*X),f=Z/i,p=X/i,j=(-M+h)*f+(-H+R)*p;return 0>=j?(Q.x=M,Q.y=H):j>=i?(Q.x=Y,Q.y=E):(Q.x=M+j*f,Q.y=H+j*p),Z=h-Q.x,X=R-Q.y,Q.z=P.sqrt(Z*Z+X*X),Q},ak=function(e,B){var m,v,y,C,V,E,t,j,u=e.getPoints(),H=e.getSegments(),K=e.p(),Z=e.getRotation();if(!H||!(H.indexOf(3)>0||H.indexOf(4)>0)){for(j=0;j<=u.size()-1;j++)if(j===u.size()-1?(V=u.get(0),C=u.get(j)):(C=u.get(j),V=u.get(j+1)),C=Jc(K,C.x-K.x,C.y-K.y,Z),V=Jc(K,V.x-K.x,V.y-K.y,Z),E=Zf(C.x,C.y,V.x,V.y,B.x,B.y),t=E.z,t<(e.s("shape.border.width")||10)){v=C,y=V,m=j;break}if(m!=z){var L=Zf(v.x,v.y,y.x,y.y,B.x,B.y),b=i(v,L);return{attachIndex:m,attachOffset:b}}}},ol=function(w){for(var P=w._data,M=P.p(),h=P.getRotation(),s=P.getPoints(),g=z,C=[],k=0;k<s.size();k++)g=s.get(k),C.push(Jc(M,g.x-M.x,g.y-M.y,h));w._55O.$15l=C};J._editPointSize=_?24:9,J._edgeHelpers=["parent","remove","source","target"],J._leftTopHelpers=["parent"],J._rightTopHelpers=["host"],J._leftBottomHelpers=["edge"],J._rightBottomHelpers=["remove"],vg=vg.concat(vg).concat(vg),M._79o=function(){var D=this,g=D.gv,I=g.getZoom(),G=g._editInteractor,b=Pn.call(D),n=Nc(D,!0),m=n[0],P=n[1],w={x:b.x,y:b.y,width:b.width,height:b.height},V=j(m,P);if(G instanceof R.XEditInteractor){w=c(w,V);var o=D._55O,x=g.getEditPointSize()/I+2,N=0;o&&o._43O&&(N+=x/2,q(w,N))}return w},M._47O=function(K){var w=this,V=w.gv,l=V._editInteractor;l instanceof R.XEditInteractor||sh.call(w,K)},M.rectIntersects=function(p){var c=this,n=c._data,W=c.gv,y=W.getZoom(),F=c._55O,q=W._editInteractor;if(q instanceof R.XEditInteractor&&W.isEditable(n)&&F&&F._43O&&"points"===n.s("edge.type")){var X=n.s("edge.points"),E=n.s("edge.segments");X=Zd(c,X),E||(E=fs(X)),X=X._as;var g=!1,k=_?5:1,l=p.x+k,b=p.y+k,Q={x:l,y:b};if(q._edge===n&&q._hoverSegmentIndex>=0){var e=W._editInteractor._hoverSegmentIndex,A=E.get(e),r=Lk(n,c,e),P=z;if(r!=z&&r>=0){var Y=X[r],G=W.getSegmentHoverWidth()/y;if(2===A||1===A){var $=X[r+1];P=fc(new Nk(Y.x,Y.y),new Nk($.x,$.y),new Nk(Q.x-G,Q.y-G),new Nk(Q.x+2*G,Q.y+2*G)),P.$62l===f&&(g=!0)}else if(3===A){var K=X[r+1],$=X[r+2];P=Si(new Nk(Y.x,Y.y),new Nk(K.x,K.y),new Nk($.x,$.y),new Nk(Q.x-G,Q.y-G),new Nk(Q.x+2*G,Q.y+2*G)),P.$62l===f&&(g=!0)}else if(4===A){var j=X[r+1],o=X[r+2];$=X[r+3],P=xs(new Nk(Y.x,Y.y),new Nk(j.x,j.y),new Nk(o.x,o.y),new Nk($.x,$.y),new Nk(Q.x-G,Q.y-G),new Nk(Q.x+2*G,Q.y+2*G)),P.$62l===f&&(g=!0)}}}if(g)return!0}return z},S._47O=function(q){var J=this,w=J.gv,B=w._editInteractor;B instanceof R.XEditInteractor||of.call(J,q)},S.rectIntersects=function(h){var Q=this,d=Q._data,g=Q.gv,T=g.getZoom(),X=Q._55O,V=g._editInteractor;if(V instanceof R.XEditInteractor&&g.isEditable(d)&&X&&X._43O){var W=X.$15l,B=!1,I=_?5:1,k=h.x+I,i=h.y+I,Y={x:k,y:i};if(W&&W.length===d.getPoints().size()||(ol(Q),W=X.$15l),V._shape===d&&V._hoverSegmentIndex>=0){var P=d.getSegments();P||(P=fs(W));var s=g._editInteractor._hoverSegmentIndex,c=P.get(s),q=Lk(d,Q,s),U=z;if(q!=z&&q>=0){var o=W[q],L=g.getSegmentHoverWidth()/T;if(2===c||1===c){var C=W[q+1];U=fc(new Nk(o.x,o.y),new Nk(C.x,C.y),new Nk(Y.x-L,Y.y-L),new Nk(Y.x+2*L,Y.y+2*L)),U.$62l===f&&(B=!0)}else if(3===c){var t=W[q+1],C=W[q+2];U=Si(new Nk(o.x,o.y),new Nk(t.x,t.y),new Nk(C.x,C.y),new Nk(Y.x-L,Y.y-L),new Nk(Y.x+2*L,Y.y+2*L)),U.$62l===f&&(B=!0)}else if(4===c){var l=W[q+1],y=W[q+2];C=W[q+3],U=xs(new Nk(o.x,o.y),new Nk(l.x,l.y),new Nk(y.x,y.y),new Nk(C.x,C.y),new Nk(Y.x-L,Y.y-L),new Nk(Y.x+2*L,Y.y+2*L)),U.$62l===f&&(B=!0)}}}if(B)return!0}return z},S._48O=function(){var D=this,K=D.gv,x=K._editInteractor;x instanceof R.XEditInteractor?(l._48O.call(D),D._55O._43O&&ol(D)):tp.call(D)},S._79o=function(){var X=this,L=X.gv,H=L.getZoom(),K=L._editInteractor,O=Gn.call(X);if(O){var D={x:O.x,y:O.y,width:O.width,height:O.height};if(K instanceof R.XEditInteractor){var d=X._55O,A=L.getEditPointSize()/H+2,g=0;d&&d._43O&&(g+=A/2,q(D,g))}return D}},l._47O=function(G){var a=this,L=a.gv,n=L._editInteractor;if(n instanceof R.XEditInteractor);else{var S=a._55O;S&&S._98o&&en.call(a,G)}},l._2o=function(){var k=this,J=k.gv,V=J._editInteractor,a=k._data;return J.isEditable(a)&&V instanceof R.XEditInteractor?0:ni.call(k)},l._80o=function(t){var j=this,Y=j.gv._editInteractor;if(Sd.call(j,t),Y&&Y._debug){t.save(),t.beginPath(),t.lineWidth=1,t.strokeStyle="green";var s=j._79o();s&&(t.rect(s.x,s.y,s.width,s.height),t.stroke()),t.restore()}},S._80o=function(Y){var B=this,v=B.gv._editInteractor;if(ph.call(B,Y),v&&v._debug){Y.save(),Y.beginPath(),Y.lineWidth=1,Y.strokeStyle="green";var w=B._79o();Y.rect(w.x,w.y,w.width,w.height),Y.stroke(),Y.restore()}},l._48O=function(){var u=this,L=u.gv,J=u._data,g=L._editInteractor,t=u._55O,X=J.p(),S=J.getRotation();if(g instanceof R.XEditInteractor){if(t._42O){var v=Qp(X,J.getWidth(),J.getHeight(),S),x=v[0],d=v[1],n=v[2],A=v[3],Z=v[4],w=v[5],E=v[6],M=v[7];t.$45l=[x,Z,d,w,A,E,n,M]}}else xm.call(u)},J.getResizeMode=function(){return this.$25l||"normal"},J.setResizeMode=function(q){var L=this.$25l;this.$25l=q,this.fp("resizeMode",L,q)},J.getSnapAngle=function(){return this.$26l||Math.PI/36},J.setSnapAngle=function(h){var I=this.$26l;this.$26l=h,this.fp("snapAngle",I,h)},J.getSnapSpacing=function(){return this.$27l},J.setSnapSpacing=function(R){var A=this.$27l;this.$27l=R,this.fp("snapSpacing",A,R)},J.getPointSnapSpacing=function(){return this._pointSnapSpacing},J.setPointSnapSpacing=function(C){var z=this._pointSnapSpacing;this._pointSnapSpacing=C,this.fp("pointSnapSpacing",z,C)},J.setHelperEditableFunc=function(M){var Q=this._helperEditableFunc;this._helperEditableFunc=M,this.fp("helperEditableFunc",Q,M)},J.getHelperEditableFunc=function(){return this._helperEditableFunc},J.setLeftTopHelpers=function(D){var x=this._leftTopHelpers;this._leftTopHelpers=D,this.fp("leftTopHelpers",x,D)},J.getLeftTopHelpers=function(){return this._leftTopHelpers},J.setLeftTopHelpersAlign=function(d){var G=this._leftTopHelpersAlign;this._leftTopHelpersAlign=d,this.fp("leftTopHelpersAlign",G,d)},J.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},J.setRightTopHelpers=function(E){var r=this._rightTopHelpers;this._rightTopHelpers=E,this.fp("rightTopHelpers",r,E)},J.getRightTopHelpers=function(){return this._rightTopHelpers},J.setRightTopHelpersAlign=function(S){var J=this._rightTopHelpersAlign;this._rightTopHelpersAlign=S,this.fp("rightTopHelpersAlign",J,S)},J.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},J.setLeftBottomHelpers=function(V){var W=this._leftBottomHelpers;this._leftBottomHelpers=V,this.fp("leftBottomHelpers",W,V)},J.getLeftBottomHelpers=function(){return this._leftBottomHelpers},J.setLeftBottomHelpersAlign=function(B){var Y=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=B,this.fp("leftBottomHelpersAlign",Y,B)},J.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},J.setRightBottomHelpers=function(i){var P=this._rightBottomHelpers;this._rightBottomHelpers=i,this.fp("rightBottomHelpers",P,i)},J.getRightBottomHelpers=function(){return this._rightBottomHelpers},J.setRightBottomHelpersAlign=function(U){var C=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=U,this.fp("rightBottomHelpersAlign",C,U)},J.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},J.setEdgeHelpers=function(i){var E=this._edgeHelpers;this._edgeHelpers=i,this.fp("edgeHelpers",E,i)},J.getEdgeHelpers=function(){return this._edgeHelpers},J.isHelperEditable=function(j,I){return j instanceof X&&("host"===I||"edge"===I||"elevation"===I||"tall"===I)?!1:j instanceof W&&("source"===I||"target"===I)?!1:"pointElevation"===I?this._helperEditableFunc?this._helperEditableFunc(j,I):!1:this._helperEditableFunc?this._helperEditableFunc(j,I):!0},J.getEditHelperSize=function(){return this._editHelperSize||(_?28:16)},J.setEditHelperSize=function(P){var c=this._editHelperSize;this._editHelperSize=P,this.fp("editHelperSize",c,P)},J.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},J.setEditRectBorderColor=function(Z){var z=this.$28l;this.$28l=Z,this.fp("editRectBorderColor",z,Z)},J.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},J.setNodeBorderColor=function(_){var e=this.$29l;this.$29l=_,this.fp("nodeBorderColor",e,_)},J.getEditRectBorderStyle=function(){return this.$30l||"dashed"},J.setEditRectBorderStyle=function(J){var b=this.$30l;this.$30l=J,this.fp("editRectBorderStyle",b,J)},J.getControlPointBackground=function(){return this.$31l||"#ff0"},J.setControlPointBackground=function(F){var e=this.$31l;this.$31l=F,this.fp("controlPointBackground",e,F)},J.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},J.setControlPointBorderColor=function(Q){var V=this.$32l;this.$32l=Q,this.fp("controlPointBorderColor",V,Q)},J.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},J.setJoinPointBackground=function(a){var m=this.$33l;this.$33l=a,this.fp("joinPointBackground",m,a)},J.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},J.setJoinPointBorderColor=function(O){var R=this.$34l;this.$34l=O,this.fp("joinPointBorderColor",R,O)},J.getDirectionLineColor=function(){return this.$35l||"#888"},J.setDirectionLineColor=function(W){var Z=this.$35l;this.$35l=W,this.fp("directionLineColor",Z,W)},J.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},J.setSegmentHoverColor=function(M){var K=this.$36l;this.$36l=M,this.fp("segmentHoverColor",K,M)},J.getSegmentHoverWidth=function(){return this.$22l||(_?16:8)},J.setSegmentHoverWidth=function(s){var Y=this.$22l;this.$22l=s,this.fp("segmentHoverWidth",Y,s)},J.getSnapPointBorderColor=function(){return this.$38l||"#f00"},J.setSnapPointBorderColor=function(V){var G=this.$38l;this.$38l=V,this.fp("snapPointBorderColor",G,V)},J.getEditRectPadding=function(){return this.$39l!=z?this.$39l:6},J.setEditRectPadding=function(J){var _=this.$39l;this.$39l=J,this.fp("editRectPading",_,J)},J.isRectEditable=function(L){var Q=this,D=Q._editInteractor;return D instanceof R.XEditInteractor?Q._rectEditableFunc?Q._rectEditableFunc(L):!0:yf.call(Q,L)},J.isPointEditable=function(A){var N=this,U=N._editInteractor;return U instanceof R.XEditInteractor?N._pointEditableFunc?N._pointEditableFunc(A):!0:Cd.call(N,A)},J.validateImpl=function(){var G=this,f=G.$14l,z=G._editInteractor;if(f){var W=G.getWidth(),B=G.getHeight();(W!==f.clientWidth||B!==f.clientHeight)&&(z&&(z._68I=1),p.setCanvas(f,W,B),G._32I=1)}Vo.call(this)},J.isEditable=function(O){var h=Fj.call(this,O),g=this._editInteractor;if(g instanceof R.XEditInteractor&&O instanceof X){O.getSource()==O.getTarget()&&(h=!1);var x=this.getEditableFunc();h=x?x(O):!0}return h},J._42=function(S,I){var $=this,n=$._editInteractor;vj.call($,S,I),n instanceof R.XEditInteractor&&n._68I&&n._42()},J.isSnapPoint=function(){return!0};var Bo=function(M){arguments.length>0&&this.$58l(M)},Mb=Bo.prototype;Mb.$58l=function(g){this.$62l=g,this.points=new Array},Mb.$56l=function(c){this.points.push(c)},Mb.$57l=function(m){this.points=this.points.concat(m)};var Nk=function(d,v){arguments.length>0&&this.$58l(d,v)},Hg=Nk.prototype;Hg.$58l=function(m,V){this.x=m,this.y=V},Hg.add=function(M){return new Nk(this.x+M.x,this.y+M.y)},Hg.addEquals=function(h){return this.x+=h.x,this.y+=h.y,this},Hg.$55l=function(D){return new Nk(this.x*D,this.y*D)},Hg.eq=function(K){return this.x==K.x&&this.y==K.y},Hg.lt=function(B){return this.x<B.x&&this.y<B.y},Hg.lte=function(t){return this.x<=t.x&&this.y<=t.y},Hg.gt=function(Q){return this.x>Q.x&&this.y>Q.y},Hg.gte=function(N){return this.x>=N.x&&this.y>=N.y},Hg.lerp=function(j,I){return new Nk(this.x+(j.x-this.x)*I,this.y+(j.y-this.y)*I)},Hg.distanceFrom=function(l){var b=this.x-l.x,A=this.y-l.y;return y(b*b+A*A)},Hg.min=function(M){return new Nk(n(this.x,M.x),n(this.y,M.y))},Hg.max=function(S){return new Nk(s(this.x,S.x),s(this.y,S.y))},Hg.toString=function(){return this.x+","+this.y};var Xo=function(){this.$58l(arguments)},Oq=Xo.prototype;Xo.TO=1e-6,Xo.AC=6,Oq.$58l=function(r){this.co=new Array;for(var J=r.length-1;J>=0;J--)this.co.push(r[J])},Oq.$55l=function(L){for(var S=new Xo,t=0;t<=this.$50l()+L.$50l();t++)S.co.push(0);for(var t=0;t<=this.$50l();t++)for(var Y=0;Y<=L.$50l();Y++)S.co[t+Y]+=this.co[t]*L.co[Y];return S},Oq.$59l=function(){for(var x=this.$50l();x>=0&&V(this.co[x])<=Xo.TO;x--)this.co.pop()},Oq.$50l=function(){return this.co.length-1},Oq.$51l=function(){var z;switch(this.$59l(),this.$50l()){case 0:z=new Array;break;case 1:z=this.$52l();break;case 2:z=this.$53l();break;case 3:z=this.$54l();break;case 4:z=this.$63l();break;default:z=new Array}return z},Oq.$52l=function(){var n=new Array,r=this.co[1];return 0!=r&&n.push(-this.co[0]/r),n},Oq.$53l=function(){var p=new Array;if(2==this.$50l()){var B=this.co[2],d=this.co[1]/B,k=this.co[0]/B,v=d*d-4*k;if(v>0){var $=y(v);p.push(.5*(-d+$)),p.push(.5*(-d-$))}else 0==v&&p.push(.5*-d)}return p},Oq.$63l=function(){var D=new Array;if(4==this.$50l()){var K=this.co[4],f=this.co[3]/K,z=this.co[2]/K,C=this.co[1]/K,e=this.co[0]/K,j=new Xo(1,-z,f*C-4*e,-f*f*e+4*z*e-C*C).$54l(),x=j[0],m=f*f/4-z+x;if(V(m)<=Xo.TO&&(m=0),m>0){var s=y(m),c=3*f*f/4-s*s-2*z,Y=(4*f*z-8*C-f*f*f)/(4*s),R=c+Y,T=c-Y;if(V(R)<=Xo.TO&&(R=0),V(T)<=Xo.TO&&(T=0),R>=0){var M=y(R);D.push(-f/4+(s+M)/2),D.push(-f/4+(s-M)/2)}if(T>=0){var M=y(T);D.push(-f/4+(M-s)/2),D.push(-f/4-(M+s)/2)}}else if(0>m);else{var Y=x*x-4*e;if(Y>=-Xo.TO){if(0>Y&&(Y=0),Y=2*y(Y),c=3*f*f/4-2*z,c+Y>=Xo.TO){var v=y(c+Y);D.push(-f/4+v/2),D.push(-f/4-v/2)}if(c-Y>=Xo.TO){var v=y(c-Y);D.push(-f/4+v/2),D.push(-f/4-v/2)}}}}return D},Oq.$54l=function(){var N=new Array;if(3==this.$50l()){var O=this.co[3],Q=this.co[2]/O,D=this.co[1]/O,X=this.co[0]/O,w=(3*D-Q*Q)/3,J=(2*Q*Q*Q-9*D*Q+27*X)/27,T=Q/3,L=J*J/4+w*w*w/27,F=J/2;if(V(L)<=Xo.TO&&(L=0),L>0){var q,n,H=y(L);q=-F+H,n=q>=0?e(q,1/3):-e(-q,1/3),q=-F-H,q>=0?n+=e(q,1/3):n-=e(-q,1/3),N.push(n-T)}else if(0>L){var u=y(-w/3),p=m(y(-L),-F)/3,$=h(p),k=x(p),A=y(3);N.push(2*u*$-T),N.push(-u*($+A*k)-T),N.push(-u*($-A*k)-T)}else{var q;q=F>=0?-e(F,1/3):e(-F,1/3),N.push(2*q-T),N.push(-q-T)}}return N};var hs=function(h,V){arguments.length>0&&this.$58l(h,V)},Uh=hs.prototype;Uh.$58l=function(O,W){this.x=O,this.y=W},Uh.length=function(){return y(this.x*this.x+this.y*this.y)},Uh.$60l=function(I){return this.x*I.x+this.y*I.y};var Hl=function(j,q,$,I){var W,c=(I.x-$.x)*(j.y-$.y)-(I.y-$.y)*(j.x-$.x),z=(q.x-j.x)*(j.y-$.y)-(q.y-j.y)*(j.x-$.x),g=(I.y-$.y)*(q.x-j.x)-(I.x-$.x)*(q.y-j.y);if(0!=g){var s=c/g,Z=z/g;s>=0&&1>=s&&Z>=0&&1>=Z?(W=new Bo(f),W.points.push(new Nk(j.x+s*(q.x-j.x),j.y+s*(q.y-j.y)))):W=new Bo(N)}else W=0==c||0==z?new Bo("C"):new Bo("P");return W},Qj=function(l,b,x,e,s){var y,C,I,W,O,S,h,t=e.min(s),m=e.max(s),o=new Bo(N);y=b.$55l(-2),I=l.add(y.add(x)),y=l.$55l(-2),C=b.$55l(2),W=y.add(C),O=new Nk(l.x,l.y),h=new hs(e.y-s.y,s.x-e.x),S=e.x*s.y-s.x*e.y;for(var M=new Xo(h.$60l(I),h.$60l(W),h.$60l(O)+S).$51l(),H=0;H<M.length;H++){var R=M[H];if(R>=0&&1>=R){var a=l.lerp(b,R),k=b.lerp(x,R),Z=a.lerp(k,R);e.x==s.x?t.y<=Z.y&&Z.y<=m.y&&(o.$62l=f,o.$56l(Z)):e.y==s.y?t.x<=Z.x&&Z.x<=m.x&&(o.$62l=f,o.$56l(Z)):Z.gte(t)&&Z.lte(m)&&(o.$62l=f,o.$56l(Z))}}return o},Si=function(q,n,Z,W,_){var p=W.min(_),C=W.max(_),B=new Nk(C.x,p.y),R=new Nk(p.x,C.y),r=Qj(q,n,Z,p,B),Y=Qj(q,n,Z,B,C),x=Qj(q,n,Z,C,R),y=Qj(q,n,Z,R,p),j=new Bo(N);return j.$57l(r.points),j.$57l(Y.points),j.$57l(x.points),j.$57l(y.points),j.points.length>0&&(j.$62l=f),j},hr=function(P,Q,Y,S,A,d){var v,D,h,c,j,n,m,$,J,K,i=A.min(d),O=A.max(d),G=new Bo(N);v=P.$55l(-1),D=Q.$55l(3),h=Y.$55l(-3),c=v.add(D.add(h.add(S))),j=new hs(c.x,c.y),v=P.$55l(3),D=Q.$55l(-6),h=Y.$55l(3),c=v.add(D.add(h)),n=new hs(c.x,c.y),v=P.$55l(-3),D=Q.$55l(3),h=v.add(D),m=new hs(h.x,h.y),$=new hs(P.x,P.y),K=new hs(A.y-d.y,d.x-A.x),J=A.x*d.y-d.x*A.y;for(var o=new Xo(K.$60l(j),K.$60l(n),K.$60l(m),K.$60l($)+J).$51l(),F=0;F<o.length;F++){var I=o[F];if(I>=0&&1>=I){var E=P.lerp(Q,I),_=Q.lerp(Y,I),g=Y.lerp(S,I),L=E.lerp(_,I),k=_.lerp(g,I),b=L.lerp(k,I);A.x==d.x?i.y<=b.y&&b.y<=O.y&&(G.$62l=f,G.$56l(b)):A.y==d.y?i.x<=b.x&&b.x<=O.x&&(G.$62l=f,G.$56l(b)):b.gte(i)&&b.lte(O)&&(G.$62l=f,G.$56l(b))}}return G},xs=function(p,B,i,q,j,X){var v=j.min(X),w=j.max(X),x=new Nk(w.x,v.y),I=new Nk(v.x,w.y),W=hr(p,B,i,q,v,x),M=hr(p,B,i,q,x,w),t=hr(p,B,i,q,w,I),T=hr(p,B,i,q,I,v),h=new Bo(N);return h.$57l(W.points),h.$57l(M.points),h.$57l(t.points),h.$57l(T.points),h.points.length>0&&(h.$62l=f),h},fc=function(B,I,K,E){var R=K.min(E),_=K.max(E),u=new Nk(_.x,R.y),Z=new Nk(R.x,_.y),o=Hl(R,u,B,I),J=Hl(u,_,B,I),l=Hl(_,Z,B,I),U=Hl(Z,R,B,I),p=new Bo(N);return p.$57l(o.points),p.$57l(J.points),p.$57l(l.points),p.$57l(U.points),p.points.length>0&&(p.$62l=f),p},xe=R.XEditInteractor=function(G){var z=this,u=z._view=document.createElement("canvas");u.className="editCanvas",u.style.position="absolute",xe.superClass.constructor.call(z,G)};$.def(xe,R.Interactor,{ms_edit:1,setUp:function(){var C=this,L=C.gv,q=L.getView(),X=C._view;xe.superClass.setUp.call(C),L.setEditInteractor(C),L.$14l=X,L._79O?q.insertBefore(X,L._79O):q.appendChild(X);var J=C.$49l=C.$11l.bind(C);L.dm().md(J),L.sm().ms(J),L.mp(J)},tearDown:function(){var O=this,s=O.gv,J=s.getView(),I=O.$49l;xe.superClass.tearDown.call(O),s.setEditInteractor(z),s.$14l=z,J.removeChild(O._view),s.dm().umd(I),s.sm().ums(I),s.ump(I)},clear:function(){var n=this,Z=n.gv;delete n._hoverSegmentIndex,delete n._edge,delete n._shape,delete Z._editing,delete n.$10l,delete n.$13l,delete n.$9l,delete n._removePointIndex,delete n._lp,n.$12l="",delete n.$40l,delete n.$67l,delete n.$72l,delete n.$73l,delete n.$75l,delete n.$1l,delete n.$3l,delete n.$2l,delete n.$92l,delete n.$93l,delete n.$94l,n.clearDragging()},handle_keydown:function(l){this.$48l!==l.shiftKey&&(this.$48l=l.shiftKey,this.handle_mousemove(l,T,!0))},handle_keyup:function(y){this.$48l!==y.shiftKey&&(this.$48l=y.shiftKey,this.handle_mousemove(y,T,!0))},handle_touchstart:function($){this.handle_mousemove($),this.handle_mousedown($)},handle_mousedown:function(p){E(p);var o=this,d=o.$13l,A=o.gv,X=A.dm(),I=X.getHistoryManager(),T=A.sm(),G=A.getZoom(),g=A.lp(p),B=$.isDoubleClick(p),O=$.isLeftButton(p),K=o.$7l,m=o._shape,n=o._hoverSegmentIndex,M=o._edge,U=o.$87l,v=o.$88l,c=function(){o._68I||U===o.$87l&&v===o.$88l||o.$43l()};if(7!==o.$67l&&(delete o.$87l,delete o.$88l),O&&(m||M)&&n>=0&&B&&(m&&T.contains(m)||M&&T.contains(M))){var S=Rj.call(o,m||M,n,g);return o.addShapePoint(m||M,n,S),D(function(){o.handle_mousemove(p)},40),void 0}if(O&&(m||M)&&o._removePointIndex>=0&&B)return o.removeShapePoint(),o.$5l=1,D(function(){o.handle_mousemove(p)},40),void 0;if(!O||!A._editing)return c(),void 0;if(m&&d>=0){var z=m.getPoints().get(d),s=m.p(),L=Jc(s,z.x-s.x,z.y-s.y,-K+m.getRotation());_=Jc(s,g.x-s.x,g.y-s.y,-K),o.$24l={x:_.x-L.x,y:_.y-L.y},o.startDragging(p),I&&I.beginInteraction(),o.fi({kind:"beginEditPoint",event:p,data:m,index:d}),o.$88l=d,o.$87l=m}else if(o.$10l){var N=A.sm().getSelection(),k=o.$6l,Z=o.$1l={},r=o.$3l={},y=o.$16l[t[o.$10l]],i={x:k.x,y:k.y},Y={x:k.x+k.width/2,y:k.y+k.height/2};o.$24l={x:g.x-y.x/G,y:g.y-y.y/G},o.$2l=b(o.$8l),o.$4l=b(k),N.each(function(m){if(m instanceof W){var o=m.p(),V=m.getWidth(),f=m.getHeight(),I=Jc(Y,o.x-Y.x,o.y-Y.y,-K);Z[m.getId()]={x:o.x-V/2,y:o.y-f/2,width:V,height:f},r[m.getId()]={x:(I.x-i.x)/k.width,y:(I.y-i.y)/k.height}}}),o.startDragging(p),I&&I.beginInteraction(),o.fi({kind:"beginEditRect",event:p,direction:o.$10l})}else if(M&&d>=0){var u=Zd(A.getDataUI(M),M.s("edge.points")),z=u.get(d);o.$24l={x:g.x-z.x,y:g.y-z.y},o.startDragging(p),I&&I.beginInteraction(),o.fi({kind:"beginEditPoint",event:p,data:M,index:d}),o.$88l=d,o.$87l=M}else if(o.$40l){var k=o.$6l,Y={x:k.x+k.width/2,y:k.y+k.height/2},l=b(o.$23l);l.x/=G,l.y/=G;var w=Jc(Y,l.x-Y.x,l.y-Y.y,-K),_=Jc(Y,g.x-Y.x,g.y-Y.y,-K);o.$24l={x:_.x-w.x,y:_.y-w.y},o.startDragging(p),I&&I.beginInteraction(),o.fi({kind:"beginEditRotation",event:p,data:o._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(o.$67l)>=0)o.startDragging(p);else if(o.$71l&&B&&o.$79l(o.$71l,g)){var f=T.toSelection();I&&I.beginInteraction(),f.each(function(t){X.remove(t)}),I&&I.endInteraction()}c()},$11l:function(){var y=this,o=y.gv;o._editing&&(y.$13l==z||y._shape==z&&y._edge==z)&&(y.$73l==z||1!==y.$67l&&5!==y.$67l&&6!==y.$67l)||(y.$5l=1),y._68I=1},$46l:function(o){var F=this,f=F.gv,I=f.lp(o),_=[];return Zi(f,function(l){var X=f.getDataUI(l);if(X){var A=X._79o();K(A,I)&&_.push(l)}}),_},$47l:function(R){var i=this,L=i.$13l,j=i.gv.dm(),H=j.getHistoryManager();i.$10l?(i.fi({kind:"endEditRect",event:R,direction:i.$10l}),H&&H.endInteraction()):i._shape&&L>=0?(i.fi({kind:"endEditPoint",event:R,data:i._shape,index:L}),H&&H.endInteraction()):i._edge&&L>=0?(i.fi({kind:"endEditPoint",event:R,data:i._edge,index:L}),H&&H.endInteraction()):i.$23l&&i.$40l&&(i.fi({kind:"endEditRotation",event:R}),H&&H.endInteraction())},handleWindowTouchEnd:function(F){this.handleWindowMouseUp(F)},handleWindowMouseUp:function(h){var y=this,d=y.gv,k=d.dm(),K=k.getHistoryManager(),s=y._shape,l=y._edge,t=y.$13l,V=y.$40l,o=y.$9l,B=y.$10l,I=y.$67l;if((s||l)&&t>=0&&o>=0){var m,g;if(s){var $=s.p(),Y=s.getRotation();m=s.getPoints(),g=m.get(o),nk(s,$,Y,t,g,!1)}else if(m=Zd(d.getDataUI(l),l.s("edge.points"),!0),g=m.get(o),0===t){var n=m.get(0);l.s("edge.source.offset.x",g.x-n.x),l.s("edge.source.offset.y",g.y-n.y)}else if(t===m.size()-1){var x=m.get(m.size()-1);l.s("edge.target.offset.x",g.x-x.x),l.s("edge.target.offset.y",g.y-x.y)}else"points"===l.s("edge.type")&&(m.set(t,g),l.s("edge.points",th(m)))}y.$47l(h);var E=y.$73l;1===I?(K&&K.beginInteraction(),E?d.sm().each(function(H){if(H.setHost&&d.isHelperEditable(H,"host")){H.setHost(E);var s=y.$75l,G=y.$74l;s&&(H.s("attach.row.index",s.rowIndex),H.s("attach.column.index",s.columnIndex)),G&&(H.s("attach.index",G.attachIndex),H.s("attach.offset",G.attachOffset),H.s("attach.offset.relative",!1),H.s("attach.offset.opposite",!1))
}}):d.sm().each(function(o){o.setHost&&d.isHelperEditable(o,"host")&&(o.setHost(z),o.s("attach.row.index",T),o.s("attach.column.index",T),o.s("attach.index",T),o.s("attach.offset",T),o.s("attach.offset.relative",!1),o.s("attach.offset.opposite",!1))}),K&&K.endInteraction()):2===I?(K&&K.beginInteraction(),E?d.sm().each(function(B){B.setParent&&d.isHelperEditable(B,"parent")&&B.setParent(E)}):d.sm().each(function(Q){Q.setParent&&d.isHelperEditable(Q,"parent")&&Q.setParent(z)}),K&&K.endInteraction()):3===I?E&&(K&&K.beginInteraction(),d.sm().each(function(s){if(d.isHelperEditable(s,"edge")&&s instanceof W&&E instanceof W){var f=new L.Edge;k.add(f),f.setSource(s),f.setTarget(E),y.onEdgeCreated&&y.onEdgeCreated(h,f)}}),K&&K.endInteraction()):(5===I||6===I)&&E&&(K&&K.beginInteraction(),d.sm().each(function(V){V instanceof X&&E instanceof W&&(5===I&&d.isHelperEditable(V,"source")?V.setSource(E):6===I&&d.isHelperEditable(V,"source")&&V.setTarget(E))}),K&&K.endInteraction()),(B||V)&&y.$43l(!0),_?(y.clear(),delete y.$64l,y._68I||y.$43l()):(y.handle_mousemove(h,!0),I&&!y._68I&&y.$43l())},handleWindowTouchMove:function(x){this.handleWindowMouseMove(x)},handleWindowMouseMove:function(H){this._78I(H)},handle_mousemove:function(a,V,J){if(!this._pause){if(!J){var k=_?Mj(a):a;this.$61l={clientX:k.clientX,clientY:k.clientY}}if(V===!0||!d()){var i=this,O=i.gv,N=!1,r=z;i.clear(),O.sm().size()>0&&(r=O.lp(J?i.$61l:a),N=i._79I(a,r)),N&&(O._editing=1),i.$12l!==i.$65l&&(i.$65l=i.$12l,i.setCursor(i.$12l)),i.$40l!==i.$64l&&(i.$64l=i.$40l,i._68I||i.$43l()),i._hoverSegmentIndex!==i.$66l&&(i.$66l=i._hoverSegmentIndex,i._68I||i.$43l())}}},_78I:function(P){this.autoScroll(P);var O=this,b=O.gv,A=b.lp(P),k=b.getZoom(),N=O.$13l;if((O._shape||O._edge)&&N>=0){var R,J,F,u=O._shape,a=O._edge,T=O.$24l,j=b.getPointSnapSpacing(),q=function(L,A){return j==z||isNaN(j)?{x:L,y:A}:{x:o(L/j)*j,y:o(A/j)*j}};if(u){R=u.getPoints();var h=u.p(),n=u.getRotation(),s=0;J=Jc(h,A.x-h.x,A.y-h.y,-n),nk(u,h,n,N,A,!0,T,q),O.fi({kind:"betweenEditPoint",event:P,data:u,index:N})}else if(a){R=Zd(b.getDataUI(a),a.s("edge.points"),!0),A.x-=T.x,A.y-=T.y,J=A;var d,E;if(0===N){var e=R.get(0);d=A.x-e.x,E=A.y-e.y,F=q(d,E),a.s("edge.source.offset.x",F.x),a.s("edge.source.offset.y",F.y)}else if(N===R.size()-1){var Y=R.get(R.size()-1);d=A.x-Y.x,E=A.y-Y.y,F=q(d,E),a.s("edge.target.offset.x",F.x),a.s("edge.target.offset.y",F.y)}else"points"===a.s("edge.type")&&(F=q(A.x,A.y),F.e=R.get(N).e,R.set(N,F),a.s("edge.points",th(R)));O.fi({kind:"betweenEditPoint",event:P,data:a,index:N})}if(delete O.$9l,b.isSnapPoint(u)||b.isSnapPoint(a))for(s=0;s<R.size();s++)if(s!==N){var f=R.get(s);if(i(f,J)<b.getEditPointSize()/k){O.$9l=s;break}}}else if(O.$10l){var T=O.$24l;A.x-=T.x,A.y-=T.y;var S=b.sm().getSelection(),r=O.$1l,I=O.$7l,M=O.$10l,x=O.$4l,G=O.$2l,t=b.getEditRectPadding()/k,U=2*t,B=b.getSnapSpacing(),g=B!=z&&!isNaN(B),p=Pp(G,A,M,I,2*t,b.getResizeMode(),g,!0),v=O.$6l;if(g){var l=p.width-U,K=p.height-U,_=o(l/B)*B,L=o(K/B)*B,H=_-l,c=L-K;("west"===M||"northwest"===M||"southwest"===M)&&(H=-H),("north"===M||"northwest"===M||"northeast"===M)&&(c=-c),p=Pp(G,A,M,I,2*t,b.getResizeMode(),g,!1,H,c)}O.$8l=p,v.x=p.x+t,v.y=p.y+t,v.width=p.width-U,v.height=p.height-U;var Pe=p.x+p.width/2,Cc=p.y+p.height/2,Eg=v.x,Oc=v.y,yr=v.width/x.width,mp=v.height/x.height;S.each(function(p){if(p instanceof W&&b.isEditable(p)&&b.isRectEditable(p)){var $=r[p.getId()],s=O.$3l[p.getId()],g={x:$.x+$.width/2,y:$.y+$.height/2},Y=0,L=0,R=M,j=180*V(I-p.getRotation())/C;"northeast"===M?j>=315||45>j?(Y=$.width*yr+$.x,L=$.height*(1-mp)+$.y,R="northeast"):j>=45&&135>j?(Y=$.width*(1-mp)+$.x,L=$.height*(1-yr)+$.y,R="northwest"):j>=135&&225>j?(Y=$.width*(1-yr)+$.x,L=$.height*mp+$.y,R="southwest"):(Y=$.width*mp+$.x,L=$.height*yr+$.y,R="southeast"):"north"===M?j>=315||45>j?(L=$.height*(1-mp)+$.y,R="north"):j>=45&&135>j?(Y=$.width*(1-mp)+$.x,R="west"):j>=135&&225>j?(L=$.height*mp+$.y,R="south"):(Y=$.width*mp+$.x,R="east"):"northwest"===M?j>=315||45>j?(Y=$.width*(1-yr)+$.x,L=$.height*(1-mp)+$.y,R="northwest"):j>=45&&135>j?(Y=$.width*(1-mp)+$.x,L=$.height*yr+$.y,R="southwest"):j>=135&&225>j?(Y=$.width*yr+$.x,L=$.height*mp+$.y,R="southeast"):(Y=$.width*mp+$.x,L=$.height*(1-yr)+$.y,R="northeast"):"west"===M?j>=315||45>j?(Y=$.width*(1-yr)+$.x,R="west"):j>=45&&135>j?(L=$.height*yr+$.y,R="south"):j>=135&&225>j?(Y=$.width*yr+$.x,R="east"):(L=$.height*(1-yr)+$.y,R="north"):"southwest"===M?j>=315||45>j?(Y=$.width*(1-yr)+$.x,L=$.height*mp+$.y,R="southwest"):j>=45&&135>j?(Y=$.width*mp+$.x,L=$.height*yr+$.y,R="southeast"):j>=135&&225>j?(Y=$.width*yr+$.x,L=$.height*(1-mp)+$.y,R="northeast"):(Y=$.width*(1-mp)+$.x,L=$.height*(1-yr)+$.y,R="northwest"):"east"===M?j>=315||45>j?(Y=$.width*yr+$.x,R="east"):j>=45&&135>j?(L=$.height*(1-yr)+$.y,R="north"):j>=135&&225>j?(Y=$.width*(1-yr)+$.x,R="west"):(L=$.height*yr+$.y,R="south"):"south"===M?j>=315||45>j?(L=$.height*mp+$.y,R="south"):j>=45&&135>j?(Y=$.width*mp+$.x,R="east"):j>=135&&225>j?(L=$.height*(1-mp)+$.y,R="north"):(Y=$.width*(1-mp)+$.x,R="west"):"southeast"===M&&(j>=315||45>j?(Y=$.width*yr+$.x,L=$.height*mp+$.y,R="southeast"):j>=45&&135>j?(Y=$.width*mp+$.x,L=$.height*(1-yr)+$.y,R="northeast"):j>=135&&225>j?(Y=$.width*(1-yr)+$.x,L=$.height*(1-mp)+$.y,R="northwest"):(Y=$.width*(1-mp)+$.x,L=$.height*yr+$.y,R="southwest"));var c=Jc(g,Y-g.x,L-g.y,p.getRotation());Cp(p,$,R,{x:c.x,y:c.y});var _=Eg+v.width*s.x,k=Oc+v.height*s.y,x={x:_,y:k};x=Jc({x:Pe,y:Cc},x.x-Pe,x.y-Cc,I),p.p(x.x,x.y)}}),O.fi({kind:"betweenEditRect",event:P,direction:M})}else if(O.$23l&&O.$40l){var _p=O.$8l,nr=_p.width,_c=_p.height,h={x:_p.x+nr/2,y:_p.y+_c/2},T=O.$24l,Rq=O.$23l,Or=Rq.x/k-h.x,qg=Rq.y/k-h.y,li=y(Or*Or+qg*qg),$i=Math.asin(T.x/li),Bq=b.sm().getSelection(),lm=Z+m(A.y-h.y,A.x-h.x)-$i,yi=b.getSnapAngle(),lm=o(lm/yi)*yi;0>lm&&(lm+=Q);var Gb=lm-O.$7l,zb=[h.x,0,h.y];Bq.each(function(y){if(b.isEditable(y)&&b.isRotationEditable(y)&&b.isVisible(y)){var D=Ke(y.p3(),zb),l=Fp();jm(l,-Gb),y.setRotation(y.getRotation()+Gb),cd(D,l),y.p3(zb[0]+D[0],zb[1]+D[1],zb[2]+D[2])}}),O.$7l=lm,O.fi({kind:"betweenEditRotation",event:P})}else if([1,2,3,5,6].indexOf(O.$67l)>=0)O.$72l=P,O.$78l||(O.$78l=1,D(function(){$.isDragging()&&O.$43l(),delete O.$78l},12));else if(7===O.$67l){if(O.$87l instanceof w){var u=O.$87l,Kj=O.$88l,Qr=$.clone(u.getPoints().get(Kj)),Rg=A.y-Qr.y;Qr.e||(Qr.e=0),O.$92l||(O.$92l=Qr.e),Qr.e=O.$92l-Rg,u.setPoint(Kj,Qr)}else if(O.$87l instanceof X){var a=O.$87l,Kj=O.$88l,R=Zd(b.getDataUI(a),a.s("edge.points")),Qr=R.get(Kj),Rg=A.y-Qr.y;Qr.e||(Qr.e=0),O.$92l||(O.$92l=Qr.e),Qr.e=O.$92l-Rg,R.set(Kj,Qr),a.s("edge.points",th(R))}}else if(8===O.$67l){var Bq=b.sm().getSelection(),mn=O.$93l;mn||(mn=O.$93l={}),Bq.each(function(S){if(S.p3){var E=S.p3(),p=mn[S.getId()];p==z&&(p=mn[S.getId()]=E[1]),S.p3([E[0],p-(A.y-O.$90l.y/k),E[2]])}})}else if(9===O.$67l){var Bq=b.sm().getSelection(),Zo=O.$94l;Zo||(Zo=O.$94l={}),Bq.each(function(Z){if(Z.s3){var i=Z.s3(),P=Zo[Z.getId()];P==z&&(P=Zo[Z.getId()]=i[1]);var L=P-(A.y-O.$91l.y/k);0>L&&(L=.01),Z.s3([i[0],L,i[2]])}})}},$79l:function(B,M){var X=this,S=X.gv,I=S.getZoom(),j=S.getEditHelperSize(),U=B.x/I,N=B.y/I,x=j/I,b=x/2;return K({x:U-b,y:N-b,width:x,height:x},M)?!0:void 0},_79I:function(P,L){var z=this,d=z.gv,V=d.getZoom(),t=d.getEditPointSize(),o=t/V,O=o/2;if(z.$16l){var I,q=z.$16l,f=q[3].x-q[7].x,N=q[3].y-q[7].y,p=y(f*f+N*N),F=q[1].x-q[5].x,i=q[1].y-q[5].y,Y=y(F*F+i*i),A={x:L.x*V,y:L.y*V};if(z._80I(A,0,q[0],"northwest",p,Y)||z._80I(A,1,q[1],"north",p,Y)||z._80I(A,2,q[2],"northeast",p,Y)||z._80I(A,7,q[7],"west",p,Y)||z._80I(A,3,q[3],"east",p,Y)||z._80I(A,6,q[6],"southwest",p,Y)||z._80I(A,5,q[5],"south",p,Y)||z._80I(A,4,q[4],"southeast",p,Y))return!0}if(z.$23l){var R=z.$23l,T=R.x/V,B=R.y/V;if(K({x:T-O,y:B-O,width:o,height:o},L))return z.$40l=1,z.$12l="crosshair",!0}if(z.$68l&&z.$79l(z.$68l,L))return z.$67l=1,z.$12l="crosshair",!0;if(z.$69l&&z.$79l(z.$69l,L))return z.$67l=2,z.$12l="crosshair",!0;if(z.$70l&&z.$79l(z.$70l,L))return z.$67l=3,z.$12l="crosshair",!0;if(z.$71l&&z.$79l(z.$71l,L))return z.$67l=4,z.$12l="crosshair",!0;if(z.$82l&&z.$79l(z.$82l,L))return z.$67l=5,z.$12l="crosshair",!0;if(z.$83l&&z.$79l(z.$83l,L))return z.$67l=6,z.$12l="crosshair",!0;if(z._pointElevationHelperPoint&&z.$79l(z._pointElevationHelperPoint,L))return z.$67l=7,z.$12l="crosshair",!0;if(z.$90l&&z.$79l(z.$90l,L))return z.$67l=8,z.$12l="crosshair",!0;if(z.$91l&&z.$79l(z.$91l,L))return z.$67l=9,z.$12l="crosshair",!0;for(var $=z.$46l(P),_=0;_<$.length;_++){var I,j,b=$[_],S=d.getDataUI(b);if(S&&S._55O){var C=S._55O;if(C._43O&&b instanceof X){if(I=b.s("edge.points"),I=Zd(S,I),j=b.s("edge.segments"),j||(j=fs(I)),z.$42l(b,L,I._as,j,"edge"))return!0;"points"===b.s("edge.type")&&z.$41l(b,L,I._as,j,"edge")}if(C._43O&&b instanceof w&&C.$15l&&C.$15l.length===b.getPoints().size()){if(I=C.$15l,j=b.getSegments(),j||(j=fs(I)),z.$42l(b,L,I,j,"shape"))return!0;z.$41l(b,L,I,j,"shape")}}}return!1},_80I:function(u,D,_,I,b,T){var z=this,d=z.gv,c=d.getEditPointSize(),Z=c/2,n=d.sm(),B=d.isDirectionEditable;if(B&&1===n.size()){var E=n.ld();if(B=B.bind(d),E instanceof W){if(!B(E,I))return!1;if("east"===I){if(B(E,"northeast")&&B(E,"southeast")&&2*c>=T)return!1}else if("west"===I){if(B(E,"northwest")&&B(E,"southwest")&&2*c>=T)return!1}else if("north"===I){if(B(E,"northwest")&&B(E,"northeast")&&2*c>=b)return!1}else if("south"===I&&B(E,"southwest")&&B(E,"southeast")&&2*c>=b)return!1}}else{if(2*c>=b&&("north"===I||"south"===I))return!1;if(2*c>=T&&("east"===I||"west"===I))return!1}if(K({x:_.x-Z,y:_.y-Z,width:c,height:c},u)){if(z.$10l!==I){var G=180*z.$7l/C,S="";G>=337.5||22.5>G?S="north":G>=22.5&&67.5>G?S="northeast":G>=67.5&&112.5>G?S="east":G>=112.5&&157.5>G?S="southeast":G>=157.5&&202.5>G?S="south":G>=202.5&&247.5>G?S="southwest":G>=247.5&&292.5>G?S="west":G>=292.5&&337.5>G&&(S="northwest");var o=vg.indexOf(S),S=vg[D-(1-o)+8];switch(S){case"northwest":z.$12l="nwse-resize";break;case"northeast":z.$12l="nesw-resize";break;case"southwest":z.$12l="nesw-resize";break;case"southeast":z.$12l="nwse-resize";break;case"north":z.$12l="ns-resize";break;case"east":z.$12l="ew-resize";break;case"south":z.$12l="ns-resize";break;case"west":z.$12l="ew-resize"}z.$10l=I}return!0}return!1},$42l:function(z,w,d,Z,H){var B,n=this,J=n.gv,V=J.getEditPointSize(),T=V/J.getZoom(),W=-1,f={x:w.x,y:w.y,width:0,height:0},m=function(J){"shape"===H?n._shape=z:n._edge=z,n._removePointIndex=J},U=function(c){"shape"===H?n._shape=z:n._edge=z,n.$13l=c,n.$12l="crosshair"};for(q(f,T/2),W=d.length-1,B=Z.size()-1;B>=0;B--){var A=Z.get(B);if(1===A||2===A)W-=1;else if(3===A){var Q=d[W-1];if(K(f,Q))return U(W-1),!0;W-=2}else if(4===A){var e=d[W-1],t=d[W-2];if(K(f,e))return U(W-1),!0;if(K(f,t))return U(W-2),!0;W-=3}}for(W=d.length-1,B=Z.size()-1;B>=0;B--){var A=Z.get(B),S=d[W];if(K(f,S))return m(W),U(W),!0;1===A||2===A?W-=1:3===A?W-=2:4===A&&(W-=3)}return!1},$41l:function(m,H,o,y,$){var Z=this,I=Z.gv,l=-1,x=0,T={x:H.x,y:H.y,width:0,height:0},z=function(e,T){Z._hoverSegmentIndex=T,Z._lp=H,"shape"===$?Z._shape=m:Z._edge=m};for(q(T,I.getSegmentHoverWidth()/2/I.getZoom()),m instanceof w&&m.isClosePath()&&y.indexOf(5)<0&&(y=new A(y._as),y.add(5));x<y.size();x++){var B=y.get(x);if(1===B){var E=o[l],R=o[l+1];if(E){var Y=fc(new Nk(E.x,E.y),new Nk(R.x,R.y),new Nk(T.x,T.y),new Nk(T.x+T.width,T.y+T.height));if(Y.$62l===f&&Y.points.length>0)return z(Y,x),!0}l+=1}else if(2===B){var E=o[l],R=o[l+1],Y=fc(new Nk(E.x,E.y),new Nk(R.x,R.y),new Nk(T.x,T.y),new Nk(T.x+T.width,T.y+T.height));if(Y.$62l===f&&Y.points.length>0)return z(Y,x),!0;l+=1}else if(3===B){var E=o[l],n=o[l+1],d=o[l+2],Y=Si(new Nk(E.x,E.y),new Nk(n.x,n.y),new Nk(d.x,d.y),new Nk(T.x,T.y),new Nk(T.x+T.width,T.y+T.height));if(Y.$62l===f)return z(Y,x),!0;l+=2}else if(4===B){var E=o[l],V=o[l+1],r=o[l+2],d=o[l+3],Y=xs(new Nk(E.x,E.y),new Nk(V.x,V.y),new Nk(r.x,r.y),new Nk(d.x,d.y),new Nk(T.x,T.y),new Nk(T.x+T.width,T.y+T.height));if(Y.$62l===f)return z(Y,x),!0;l+=3}else if(5===B){var E=o[l],R=o[0];if(E){var Y=fc(new Nk(E.x,E.y),new Nk(R.x,R.y),new Nk(T.x,T.y),new Nk(T.x+T.width,T.y+T.height));if(Y.$62l===f&&Y.points.length>0)return z(Y,x),!0}}}return!1},addShapePoint:function(B,p,Y){var f=this,l=f.gv,Z=l.dm(),G=Z.getHistoryManager();if(G&&G.beginInteraction(),0===arguments.length&&(B=f._shape||f._edge,p=f._hoverSegmentIndex,Y=f._lp),B instanceof w||B instanceof X){var J=Lk(B,l.getDataUI(B),p);if(!isNaN(p)&&Y&&!isNaN(J)){var r=Y;if(B instanceof w){var O=B.p(),d=B.getRotation(),C=B.toSegments();C||(C=fs(B.getPoints())),B.isClosePath()&&C.indexOf(5)<0&&(C=new A(C._as),C.add(5));var g=C.get(p),R="addPoint",c="removePointAt";if(2===g||1===g){var i={x:r.x,y:r.y};C.add(g,p),i=Jc(O,i.x-O.x,i.y-O.y,-d),B[R](i,J+1)}else if(3===g){var h=B.getPoints(),m=h.get(J),v=h.get(J+2),i={x:r.x,y:r.y};i=Jc(O,i.x-O.x,i.y-O.y,-d);var F=fg(m,i),q=fg(i,v);C.removeAt(p),C.add(3,p),C.add(3,p),B.setPoint(J+1,i),B[R](q,J+2),B[R](F,J+1)}else if(4===g){var h=B.getPoints(),m=h.get(J),v=h.get(J+3),i={x:r.x,y:r.y};i=Jc(O,i.x-O.x,i.y-O.y,-d);var F=Ui(m,i),q=rm(m,i),o=Ui(i,v),s=rm(i,v);C.removeAt(p),C.add(4,p),C.add(4,p),B[c](J+1),B[c](J+1),B[R](i,J+1),B[R](s,J+2),B[R](o,J+2),B[R](q,J+1),B[R](F,J+1)}else if(5===g){var i={x:r.x,y:r.y};C.add(2,p),i=Jc(O,i.x-O.x,i.y-O.y,-d),B[R](i,J+1)}B.isClosePath()&&C.remove(5),B.setSegments(C);var a=B.getWidth(),y=B.getHeight(),k=B.p().x-a/2,D=B.p().y-y/2;k-=O.x,D-=O.y;var T=Ob(B,{x:k,y:D,width:a,height:y},d,O);B.p(T.x,T.y)}else if(B instanceof X){if("points"!==B.s("edge.type"))return G&&G.endInteraction(),void 0;var h=B.s("edge.points");C=B.s("edge.segments"),h=Zd(l.getDataUI(B),h),C||(C=fs(h)),C=new A(C._as.slice(0)),h=new A(h._as.slice(0));var g=C.get(p);if(2===g||1===g){var i={x:r.x,y:r.y};C.add(g,p),h.add(i,J+1)}else if(3===g){var m=h.get(J),v=h.get(J+2),i={x:r.x,y:r.y},F=fg(m,i),q=fg(i,v);C.removeAt(p),C.add(3,p),C.add(3,p),h.set(J+1,i),h.add(q,J+2),h.add(F,J+1)}else if(4===g){var m=h.get(J),v=h.get(J+3),i={x:r.x,y:r.y},F=Ui(m,i),q=rm(m,i),o=Ui(i,v),s=rm(i,v);C.removeAt(p),C.add(4,p),C.add(4,p),h.removeAt(J+1),h.removeAt(J+1),h.add(i,J+1),h.add(s,J+2),h.add(o,J+2),h.add(q,J+1),h.add(F,J+1)}B.s("edge.points",th(h)),B.s("edge.segments",C)}}}G&&G.endInteraction()},removeShapePoint:function(J,I){var o=this,r="removeAt",p=o.gv,j=p.dm(),h=j.getHistoryManager();if(h&&h.beginInteraction(),0===arguments.length&&(J=o._shape||o._edge,I=o._removePointIndex),I>=0&&(J instanceof w||J instanceof X)){var u=xo(J,o.gv.getDataUI(J),I),Y=I;if(J instanceof w){var l=J.p(),U=J.toSegments();U||(U=fs(J.getPoints()));var M=U.get(u),g="removePointAt";if(1===M&&0===Y)if(J.getPoints().size()>1){var O=U.get(u+1);U[r](u+1),3===O?J[g](Y+1):4===O&&(J[g](Y+2),J[g](Y+1)),J[g](Y)}else J.dm().remove(J);else 2===M||1===M?(U[r](u),J[g](Y)):3===M?(U[r](u),J[g](Y),J[g](Y-1)):4===M&&(U[r](u),J[g](Y),J[g](Y-1),J[g](Y-2));J.setSegments(U);var L=J.getWidth(),Q=J.getHeight(),t=J.p().x-L/2,s=J.p().y-Q/2;t-=l.x,s-=l.y;var v=Ob(J,{x:t,y:s,width:L,height:Q},J.getRotation(),l);J.p(v.x,v.y)}else if(J instanceof X){if("points"!==J.s("edge.type"))return h&&h.endInteraction(),void 0;var H=J.s("edge.points");if(U=J.s("edge.segments"),H&&(H=Zd(o.gv.getDataUI(J),H),U||(U=fs(H))),0===I||I===H.size()-1)return h&&h.endInteraction(),void 0;U=new A(U._as.slice(0)),H=new A(H._as.slice(0));var M=U.get(u);2===M||1===M?(U[r](u),H[r](Y)):3===M?(U[r](u),H[r](Y),H[r](Y-1)):4===M&&(U[r](u),H[r](Y),H[r](Y-1),H[r](Y-2)),J.s("edge.segments",U),J.s("edge.points",th(H))}}h&&h.endInteraction()},changeShapeSegment:function(U,H,C){var I=this,g=I.gv,Z=g.dm(),S=Z.getHistoryManager();if(S&&S.beginInteraction(),1!==arguments.length||isNaN(U)||(C=U,U=I._shape||I._edge,H=I._hoverSegmentIndex),U instanceof w||U instanceof X){var d=Lk(U,I.gv.getDataUI(U),H);if(!isNaN(H)&&!isNaN(d))if(U instanceof w){var o=U.p(),v=U.toSegments();v||(v=fs(U.getPoints()));var c=v.get(H),L=U.toPoints();if(1===C||2===C)1===c||2===c?v.set(H,C):3===c?(v.set(H,C),L.removeAt(d+1)):4===c&&(v.set(H,C),L.removeAt(d+1),L.removeAt(d+1));else if(3===C){var h=function(){var y=L.get(d),B=L.get(d+1),o=fg(y,B);v.set(H,3),L.add(o,d+1)};2===c||1===c?h():4===c&&(L.removeAt(d+1),L.removeAt(d+1),h())}else if(4===C){var R=function(){var f=L.get(d),k=L.get(d+1),i=Ui(f,k),K=rm(f,k);v.set(H,4),L.add(i,d+1),L.add(K,d+2)};2===c||1===c?R():3===c&&(L.removeAt(d+1),R())}U.setSegments(v),U.setPoints(L);var a=U.getWidth(),G=U.getHeight(),f=U.p().x-a/2,W=U.p().y-G/2;f-=o.x,W-=o.y;var q=new Ob(U,{x:f,y:W,width:a,height:G},U.getRotation(),o);U.p(q.x,q.y)}else if(U instanceof X){if("points"!==U.s("edge.type"))return S&&S.endInteraction(),void 0;var L=U.s("edge.points");v=U.s("edge.segments"),L&&(L=Zd(I.gv.getDataUI(U),L),v||(v=fs(L))),v=new A(v._as.slice(0)),L=new A(L._as.slice(0));var c=v.get(H);if(1===C||2===C)1===c||2===c?v.set(H,C):3===c?(v.set(H,C),L.removeAt(d+1)):4===c&&(v.set(H,C),L.removeAt(d+1),L.removeAt(d+1));else if(3===C){var h=function(){var Z=L.get(d),K=L.get(d+1),I=fg(Z,K);v.set(H,3),L.add(I,d+1)};2===c||1===c?h():4===c&&(L.removeAt(d+1),L.removeAt(d+1),h())}else if(4===C){var R=function(){var x=L.get(d),b=L.get(d+1),k=Ui(x,b),w=rm(x,b);v.set(H,4),L.add(k,d+1),L.add(w,d+2)};2===c||1===c?R():3===c&&(L.removeAt(d+1),R())}U.s("edge.points",th(L)),U.s("edge.segments",v)}}S&&S.endInteraction()},getDefaultSegments:function(D){var K=this.gv,j=K.getDataUI(D);if(D instanceof X){var Q=D.s("edge.points");return Q=Zd(j,Q),fs(Q)}if(D instanceof w){var Q=D.getPoints(),Z=D.getSegments();return Z&&Z.size()>0?Z:fs(Q)}},$43l:function(S){var H=this;S&&(H.$5l=1),H._68I=1,H._42()},_42:function(){var I=this;if(I._68I){delete I._68I;var S=I.gv,s=I.$5l,O=S.getZoom(),l=S.getEditPointSize(),t=l/2,Z=new A,h=I._view,N=I._edge,i=I._shape,T=h.getContext("2d"),k=S.tx(),K=S.ty(),V=z,r=S.getEditPointBackground(),G=S.getControlPointBackground(),C=S.getControlPointBorderColor(),g=S.getEditPointBorderColor(),n=S.getEditRectBorderColor(),D=S.getDirectionLineColor(),e=S.getSegmentHoverColor(),E=S.getSnapPointBorderColor(),m=S.getJoinPointBackground(),o=S.getJoinPointBorderColor(),P=S.getSegmentHoverWidth(),J=[5,5],_=S.getEditRectBorderStyle();ag(S,function(v){S.isSelected(v)&&S.isVisible(v)&&Z.add(v)}),T.clearRect(0,0,u(h.width),u(h.height)),T.save(),p.translateAndScale(T,k,K,1);var d=z,f={x:0,y:0,width:0,height:0},a=0,x=0,B=0,R=0,M=0,U=0,Vb=0,nq=0,id=0,Eq=0,yp=[];if(s?(delete I.$6l,delete I.$8l,delete I.$7l,delete I.$16l,delete I.$23l):(d=I.$6l,V=I.$7l),delete I.$68l,delete I.$69l,delete I.$71l,delete I.$70l,delete I.$82l,delete I.$83l,delete I._pointElevationHelperPoint,delete I.$90l,delete I.$91l,delete I.$75l,delete I.$74l,Z.each(function(J){var Q=S.getDataUI(J);if(Q){var z=Q._55O;if(S.isEditable(J))z._56O&&J instanceof W&&x++,yp.push(J),z._42O&&J instanceof W&&a++,S.isHelperEditable(J,"host")&&R++,S.isHelperEditable(J,"parent")&&B++,S.isHelperEditable(J,"remove")&&M++,S.isHelperEditable(J,"edge")&&U++,S.isHelperEditable(J,"source")&&Vb++,S.isHelperEditable(J,"target")&&nq++,S.isHelperEditable(J,"elevation")&&id++,S.isHelperEditable(J,"tall")&&Eq++;else if(J instanceof Y&&J.isExpanded()){var O=!0,e=S.getEditableFunc();e&&(O=e(J)),O&&(S.isHelperEditable(J,"host")&&R++,S.isHelperEditable(J,"parent")&&B++,S.isHelperEditable(J,"remove")&&M++,S.isHelperEditable(J,"edge")&&U++,S.isHelperEditable(J,"source")&&Vb++,S.isHelperEditable(J,"target")&&nq++,S.isHelperEditable(J,"elevation")&&id++,S.isHelperEditable(J,"tall")&&Eq++,yp.push(J))}}}),T.beginPath(),T.lineWidth=1,T.strokeStyle=S.getNodeBorderColor(),yp.forEach(function(Z){var m=S.getDataUI(Z),C=m._55O;if(s)if(V==z&&(V=Z instanceof X?0:Z instanceof Y&&Z.isExpanded()?0:Z.getRotation(),I.$7l=V),d==z){var b,A,H;if(Z instanceof Y&&Z.isExpanded()||Z instanceof X){var r=S.getDataUIBounds(Z);A=r.width,H=r.height,b={x:r.x+A/2,y:r.y+H/2}}else b=Z.p(),A=Z.getWidth(),H=Z.getHeight();d={x:b.x,y:b.y,width:0,height:0},f.x=b.x-A/2,f.y=b.y-H/2,f.width=A,f.height=H,d=c(d,f)}else{var b,A,H,N,y=d.x+d.width/2,w=d.y+d.height/2,K={x:y,y:w};if(Z instanceof Y&&Z.isExpanded()||Z instanceof X){N=0;var r=S.getDataUIBounds(Z);A=r.width,H=r.height,b={x:r.x+A/2,y:r.y+H/2}}else b=Z.p(),A=Z.getWidth(),H=Z.getHeight(),N=Z.getRotation();var M={x:b.x-A/2,y:b.y-H/2,width:A,height:H},i={x:M.x,y:M.y},x={x:M.x+M.width,y:M.y},u={x:M.x,y:M.y+M.height},E={x:M.x+M.width,y:M.y+M.height},i=Jc(b,i.x-b.x,i.y-b.y,N),u=Jc(b,u.x-b.x,u.y-b.y,N),E=Jc(b,E.x-b.x,E.y-b.y,N),x=Jc(b,x.x-b.x,x.y-b.y,N),h=-V,$=Jc(K,i.x-K.x,i.y-K.y,h),Q=Jc(K,x.x-K.x,x.y-K.y,h),_=Jc(K,u.x-K.x,u.y-K.y,h),t=Jc(K,E.x-K.x,E.y-K.y,h),g=j([$,Q,_,t]);d=c(d,g),d.x-=y,d.y-=w;var k=Ob(z,d,V,K);d.x=k.x-d.width/2,d.y=k.y-d.height/2}if(a>1&&S.isEditable(Z)&&S.isRectEditable(Z)&&Z instanceof W){var p=Z.getRect(),o=C.$45l,e=sn(o[0],O),v=sn(o[2],O),J=sn(o[4],O),F=sn(o[6],O);Z.getRotation()?(T.moveTo(e.x,e.y),T.lineTo(v.x,v.y),T.lineTo(J.x,J.y),T.lineTo(F.x,F.y),T.lineTo(e.x,e.y)):T.rect(p.x*O,p.y*O,p.width*O,p.height*O)}}),T.stroke(),Z.each(function(X){var l=S.getDataUI(X);if(l){var x,H,R=l._55O,_=l._78o;if(R&&R._43O&&X instanceof w?(x=R.$15l,H=X.getSegments(),H||(H=fs(x)),X.isClosePath()&&H.indexOf(5)<0&&(H=new A(H._as),H.add(5))):R&&_&&R._43O&&(x=X.s("edge.points"),H=X.s("edge.segments"),x=Zd(l,x),H||(H=fs(x)),x&&(x=x._as)),x&&H){var f=0,Z=H.size(),K=I._hoverSegmentIndex;x=x.slice(0);for(var d=0;d<x.length;d++)x[d]=sn(x[d],O);T.beginPath(),T.strokeStyle=D,T.lineWidth=1,f=0;for(var d=0;Z>d;d++){var u=H.get(d);if(1===u||2===u)f++;else if(3===u){var q=x[f-1],a=x[f],s=x[f+1];T.moveTo(q.x,q.y),T.lineTo(a.x,a.y),T.lineTo(s.x,s.y),f+=2}else if(4===u){var q=x[f-1],W=x[f],$=x[f+1],s=x[f+2];T.moveTo(q.x,q.y),T.lineTo(W.x,W.y),T.moveTo($.x,$.y),T.lineTo(s.x,s.y),f+=3}}if(T.stroke(),i===X||N===X&&"points"===N.s("edge.type")){T.beginPath(),f=0,T.strokeStyle=e,T.lineWidth=P;for(var d=0;Z>d;d++){var u=H.get(d);if(1===u||2===u){if(K===d){var q=x[f-1],s=x[f];T.moveTo(q.x,q.y),T.lineTo(s.x,s.y);break}f++}else if(3===u){if(K===d){var q=x[f-1],a=x[f],s=x[f+1];T.moveTo(q.x,q.y),T.quadraticCurveTo(a.x,a.y,s.x,s.y);break}f+=2}else if(4===u){if(K===d){var q=x[f-1],W=x[f],$=x[f+1],s=x[f+2];T.moveTo(q.x,q.y),T.bezierCurveTo(W.x,W.y,$.x,$.y,s.x,s.y);break}f+=3}else if(5===u&&K===d){var q=x[f-1],s=x[0];T.moveTo(q.x,q.y),T.lineTo(s.x,s.y);break}}T.stroke()}T.beginPath(),f=0,T.strokeStyle=o,T.lineWidth=1,T.fillStyle=m;for(var d=0;Z>d;d++){var u=H.get(d);if(1===u||2===u){var s=x[f];T.moveTo(s.x+t,s.y),T.arc(s.x,s.y,t,0,Q,!0),f++}else if(3===u){var s=x[f+1];T.moveTo(s.x+t,s.y),T.arc(s.x,s.y,t,0,Q,!0),f+=2}else if(4===u){var s=x[f+2];T.moveTo(s.x+t,s.y),T.arc(s.x,s.y,t,0,Q,!0),f+=3}}T.fill(),T.stroke(),T.beginPath(),f=0,T.strokeStyle=C,T.lineWidth=1,T.fillStyle=G;for(var d=0;Z>d;d++){var u=H.get(d);if(1===u||2===u)f++;else if(3===u){var a=x[f];T.moveTo(a.x+t,a.y),T.arc(a.x,a.y,t,0,Q,!0),f+=2}else if(4===u){var W=x[f],$=x[f+1];T.moveTo(W.x+t,W.y),T.arc(W.x,W.y,t,0,Q,!0),T.moveTo($.x+t,$.y),T.arc($.x,$.y,t,0,Q,!0),f+=3}}if(T.fill(),T.stroke(),T.beginPath(),f=0,T.strokeStyle=E,T.lineWidth=2,(i===X||N===X)&&I.$9l!=z){var s=x[I.$9l];T.moveTo(s.x+t,s.y),T.arc(s.x,s.y,t,0,Q,!0),T.stroke()}}}}),d){I.$6l=b(d),q(d,S.getEditRectPadding()/O);var ys={x:d.x+d.width/2,y:d.y+d.height/2},Rf=Qp(ys,d.width,d.height,V),Ap=Rf[0],Ah=Rf[1],zd=Rf[2],Un=Rf[3],Sg=Rf[4],Gg=Rf[5],qp=Rf[6],td=Rf[7];if(Ap=sn(Rf[0],O),Ah=sn(Rf[1],O),zd=sn(Rf[2],O),Un=sn(Rf[3],O),Sg=sn(Rf[4],O),Gg=sn(Rf[5],O),qp=sn(Rf[6],O),td=sn(Rf[7],O),I.$8l=d,a>0&&(I.$16l=[Ap,Sg,Ah,Gg,Un,qp,zd,td],T.beginPath(),T.lineWidth=1,T.strokeStyle=n,"dashed"===_&&T.setLineDash&&T.setLineDash(J),T.moveTo(Ap.x,Ap.y),T.lineTo(Ah.x,Ah.y),T.lineTo(Un.x,Un.y),T.lineTo(zd.x,zd.y),T.lineTo(Ap.x,Ap.y),T.stroke(),"dashed"===_&&T.setLineDash&&T.setLineDash([])),T.beginPath(),T.lineWidth=1,T.fillStyle=r,T.strokeStyle=g,a>0){var mf=Gg.x-td.x,Ig=Gg.y-td.y,ah=y(mf*mf+Ig*Ig),bd=Sg.x-qp.x,is=Sg.y-qp.y,mk=y(bd*bd+is*is),Tn=2*l;if(S.isDirectionEditable&&1===yp.length){var yf=yp[0],_e=S.getDataUI(yf),nk=_e._55O,fi=S.isDirectionEditable.bind(S);if(nk._42O){var Lj,xn,Tc,ol;fi(yf,"northwest")&&(Lj=!0,T.rect(Ap.x-t,Ap.y-t,l,l)),fi(yf,"northeast")&&(xn=!0,T.rect(Ah.x-t,Ah.y-t,l,l)),fi(yf,"southwest")&&(Tc=!0,T.rect(zd.x-t,zd.y-t,l,l)),fi(yf,"southeast")&&(ol=!0,T.rect(Un.x-t,Un.y-t,l,l)),fi(yf,"north")&&(Lj&&xn?ah>Tn&&T.rect(Sg.x-t,Sg.y-t,l,l):T.rect(Sg.x-t,Sg.y-t,l,l)),fi(yf,"south")&&(ol&&Tc?ah>Tn&&T.rect(qp.x-t,qp.y-t,l,l):T.rect(qp.x-t,qp.y-t,l,l)),fi(yf,"west")&&(Tc&&Lj?mk>Tn&&T.rect(td.x-t,td.y-t,l,l):T.rect(td.x-t,td.y-t,l,l)),fi(yf,"east")&&(ol&&xn?mk>Tn&&T.rect(Gg.x-t,Gg.y-t,l,l):T.rect(Gg.x-t,Gg.y-t,l,l))}}else ah>Tn&&(T.rect(Sg.x-t,Sg.y-t,l,l),T.rect(qp.x-t,qp.y-t,l,l)),mk>Tn&&(T.rect(Gg.x-t,Gg.y-t,l,l),T.rect(td.x-t,td.y-t,l,l)),T.rect(Ap.x-t,Ap.y-t,l,l),T.rect(Ah.x-t,Ah.y-t,l,l),T.rect(zd.x-t,zd.y-t,l,l),T.rect(Un.x-t,Un.y-t,l,l)}if(x>0){var Jm=I.$23l=Jc(Sg,0,2*-l,V);T.moveTo(Jm.x+t,Jm.y),T.arc(Jm.x,Jm.y,t,0,Q,!1)}T.fill(),T.stroke(),I.$40l&&I.$44l(T,d,V);var Gq,Ak,Ti=S.getLeftTopHelpers(),$q=S.getRightTopHelpers(),Xd=S.getLeftBottomHelpers(),hp=S.getRightBottomHelpers(),Ij=S.getEdgeHelpers(),qf=S.getEditHelperSize(),Xb=qf/2,Pf=function(j,k,K,s){"leftTop"===k?(Gq=d.x*O-qf-t-("h"===s?K*(qf+t):0)-1,Ak=d.y*O-qf-t-("v"===s?K*(qf+t):0)-1):"rightTop"===k?(Gq=(d.x+d.width)*O+t+("h"===s?K*(qf+t):0)+1,Ak=d.y*O-qf-t-("v"===s?K*(qf+t):0)-1):"leftBottom"===k?(Gq=d.x*O-qf-t-("h"===s?K*(qf+t):0)-1,Ak=(d.y+d.height)*O+t+("v"===s?K*(qf+t):0)+1):"rightBottom"===k&&(Gq=(d.x+d.width)*O+t+("h"===s?K*(qf+t):0)+1,Ak=(d.y+d.height)*O+t+("v"===s?K*(qf+t):0)+1);var G=Gq+Xb,l=Ak+Xb,$=(d.x+d.width/2)*O,o=(d.y+d.height/2)*O,z=Jc({x:$,y:o},G-$,l-o,V);if("host"===j){if(R>0)return I.$77l(T,V,z),!0}else if("edge"===j){if(U>0)return I.$80l(T,V,z),!0}else if("remove"===j){if(M>0)return yp&&1===yp.length&&yp[0]instanceof X?I.$81l(T,V,{x:$+qf/2+5,y:o}):I.$81l(T,V,z),!0}else if("parent"===j){if(B>0)return yp&&1===yp.length&&yp[0]instanceof X?I.$76l(T,V,{x:$-qf/2-5,y:o}):I.$76l(T,V,z),!0}else if("elevation"===j){if(id>0)return I.$85l(T,V,z),!0}else if("tall"===j){if(Eq>0)return I.$86l(T,V,z),!0}else if("source"===j||"target"===j){var _=yp[0],Z=S.getDataUI(_),v=Nc(Z,!0),Q=v[0],r=v[1];if(Vb&&"source"===j)return I.$84l(T,d,Q,!0,_.isLooped(),k,K,s),!0;if(nq&&"target"===j)return I.$84l(T,d,r,!1,_.isLooped(),k,K,s),!0}};if(Ti&&Ti.length>0){var Hg=0;Ti.forEach(function(j){Pf(j,"leftTop",Hg,S.getLeftTopHelpersAlign()||"h")&&Hg++})}if($q&&$q.length>0){var Hg=0;$q.forEach(function(n){Pf(n,"rightTop",Hg,S.getRightTopHelpersAlign()||"h")&&Hg++})}if(Xd&&Xd.length>0){var Hg=0;Xd.forEach(function(n){Pf(n,"leftBottom",Hg,S.getLeftBottomHelpersAlign()||"h")&&Hg++})}if(hp&&hp.length>0){var Hg=0;hp.forEach(function(j){Pf(j,"rightBottom",Hg,S.getRightBottomHelpersAlign()||"h")&&Hg++})}if(Ij&&Ij.length>0&&((Vb||nq)&&yp&&1===yp.length&&yp[0]instanceof X?!0:!1)){var Hg=0;Ij.forEach(function(D){Pf(D,"edge",Hg,"h")&&Hg++})}if(I.$72l){var sp,Ff=I.$67l,md=I.$68l,bh=I.$69l,Pk=(I.$71l,I.$70l),Dc=I.$82l,Po=I.$83l;if(1===Ff?sp=md:2===Ff?sp=bh:3===Ff?sp=Pk:5===Ff?sp=Dc:6===Ff&&(sp=Po),sp){var rq=S.lp(I.$72l),Kk=S.getDataAt(I.$72l);if(Kk&&Kk instanceof W){var Ym,lh,Br;if(I.$73l=Kk,1===Ff)if(Kk instanceof L.Grid)Ym=I.$75l=Gk(Kk,rq);else if(Kk instanceof L.Shape){Br=I.$74l=ak(Kk,rq);var Mg=Kk.getPoints();if(Br){var fg=Br.attachIndex,ij=Lk(Kk,S.getDataUI(Kk),fg)+1,Fn=ij+1>=Mg.size()?0:ij+1,bq=Mg.get(ij),ri=Mg.get(Fn),Mr=Kk.p(),qh=Kk.getRotation();bq=Jc(Mr,bq.x-Mr.x,bq.y-Mr.y,qh),ri=Jc(Mr,ri.x-Mr.x,ri.y-Mr.y,qh),T.beginPath(),T.strokeStyle=e,T.lineWidth=P,T.moveTo(bq.x*O,bq.y*O),T.lineTo(ri.x*O,ri.y*O),T.stroke()}}Ym?lh=Ym.rect:(lh=$.clone(S.getDataUIBounds(Kk)),$.grow(lh,2)),T.beginPath(),T.rect(lh.x*O,lh.y*O,lh.width*O,lh.height*O),T.strokeStyle=1===Ff||4===Ff||6===Ff?H:v,T.lineWidth=2,T.setLineDash&&T.setLineDash([8,8]),T.stroke()}else delete I.$73l;rq.x=rq.x*O,rq.y=rq.y*O;var Vg=wh(sp.x,sp.y,rq.x,rq.y),Bp=Jc(sp,rq.x-sp.x,rq.y-sp.y,-Vg),di=Bp.x-sp.x;T.translate(sp.x,sp.y),T.rotate(Vg),F.width=di,F.height=40;var uk=v;(1===Ff||4===Ff||6===Ff)&&(uk=H),F.comps[0].gradientColor=uk,$.drawImage(T,F,0,-20,di,40)}}}if(I.$87l&&S.sm().contains(I.$87l)){var Lg,si=I.$87l,zb=I.$88l,qf=S.getEditHelperSize(),Xb=qf/2;if(S.isHelperEditable(si,"pointElevation"))if(si instanceof w){var Ki=si.getPosition();Lg=$.clone(si.getPoints().get(zb)),Lg=Jc({x:Ki.x,y:Ki.y},Lg.x-Ki.x,Lg.y-Ki.y,si.getRotation()),Lg.x*=O,Lg.y*=O,T.translate(Lg.x,Lg.y),$.drawImage(T,Il,Xb,-Xb,qf,qf),T.translate(-Lg.x,-Lg.y),I._pointElevationHelperPoint={x:Lg.x+qf,y:Lg.y}}else if(si instanceof X){var eg=Zd(S.getDataUI(si),si.s("edge.points")),Lg=$.clone(eg.get(zb));Lg.x*=O,Lg.y*=O,T.translate(Lg.x,Lg.y),$.drawImage(T,Il,Xb,-Xb,qf,qf),T.translate(-Lg.x,-Lg.y),I._pointElevationHelperPoint={x:Lg.x+qf,y:Lg.y}}}T.restore(),I.$5l=0}},$89l:function(P,w,z,R){P.save();var V=this,Y=V.gv,Q=Y.getEditHelperSize(),u=Q/2;P.beginPath(),P.translate(z.x,z.y),P.rotate(w),$.drawImage(P,R,-u,-u,Q,Q),P.restore()},$85l:function(s,g,z){var B=this;B.$90l=z,B.$89l(s,g,z,Il)},$86l:function(t,W,s){var h=this;h.$91l=s,h.$89l(t,W,s,Nj)},$77l:function(H,s,T){var i=this;i.$68l=T,i.$89l(H,s,T,O)},$80l:function(A,t,j){var g=this;g.$70l=j,g.$89l(A,t,j,G)},$81l:function(s,a,Z){var E=this;E.$71l=Z,E.$89l(s,a,Z,Sj)},$76l:function(H,y,T){var F=this;F.$69l=T,F.$89l(H,y,T,B)},$84l:function(Y,P,d,f,Q){var N,H=this,k=H.gv,c=k.getZoom(),F=k.getEditHelperSize(),I=F/2;d.x*=c,d.y*=c,Q&&(f?d.x-=I+5:d.x+=I+5),d.y-=F-2,f?(H.$82l=d,N=Bb):(H.$83l=d,N=Ei),Y.beginPath(),Y.translate(d.x,d.y),$.drawImage(Y,N,-I,-I,F,F),Y.translate(-d.x,-d.y)},$44l:function(J,z,D){J.save();var r=this.gv.getZoom(),N=y(e(z.width,2)+e(z.height,2))/2*r+10,Q=N,d=Q+8,c=Q+18,S=D,g=z.x+z.width/2,q=z.y+z.height/2;J.translate(g*r,q*r),J.beginPath(),J.strokeStyle="rgb(150, 150, 150)";for(var v=0,A=0,j=0,k=0,i=0,F=0;360>F;F++)v=F*C/180,0===F%5&&(A=h(v)*Q,j=x(v)*Q,k=h(v)*d,i=x(v)*d,J.moveTo(A,j),J.lineTo(k,i)),0===F%45&&(A=h(v)*Q,j=x(v)*Q,k=h(v)*c,i=x(v)*c,J.moveTo(A,j),J.lineTo(k,i));J.stroke(),J.beginPath(),J.rotate(-Z),J.beginPath(),J.fillStyle="rgba(255, 0, 0, 0.1)",J.strokeStyle="rgb(157, 157, 157)",J.moveTo(0,0),J.arc(0,0,c,0,D,!1),J.fill(),J.beginPath(),J.moveTo(0+c,0),J.arc(0,0,c,0,D,!1),J.stroke(),J.rotate(Z),J.font="bold 12px Verdana, Arial";var K=20*x(S),G=20*h(S),f=o(180*S/C)+"";J.textAlign="center",J.textBaseline="middle",J.beginPath();var b=J.measureText("365.").width;J.fillStyle="white",J.rect(K-b/2,-G-10,b,20),J.fill(),J.beginPath(),J.fillStyle="rgb(79,79,79)",J.fillText(f,K,-G),J.restore()}})}(this,Object);