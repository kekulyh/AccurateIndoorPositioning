!function(_,f,I){"use strict";var s="ht",P=_[s],u=null,N=Math,B=N.abs,J=N.max,E=Number.MAX_VALUE,Y=P.Default,z=Y.getInternal(),l=Y.clone,G=z.vec3TransformMat4,j=z.appendArray,y=function(){var V=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,w=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,s=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,g=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,n=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,c=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,Q=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,d=function(N,v){return v=parseInt(v),v>=0?N[v-1]:N[v+N.length]},o=function(N,y,z,Y,p,c){if(N.vs){var _=d(y,Y),B=d(y,p),O=d(y,c),o=z.matrix,K=N.vs;if(z.flipFace){var Z=B;B=O,O=Z}o?(j(K,G(l(_),o)),j(K,G(l(B),o)),j(K,G(l(O),o))):(j(K,_),j(K,B),j(K,O))}},H=function(A,Z,B,h,F,w){if(A.vs){var c=d(Z,h),k=d(Z,F),N=d(Z,w),S=B.flipY;if(B.flipFace){var f=k;k=N,N=f}A.uv.push(c[0],S?1-c[1]:c[1],k[0],S?1-k[1]:k[1],N[0],S?1-N[1]:N[1])}},S=function(r,c,C,Q,E,x){if(r.vs){var K=d(c,Q),u=d(c,E),t=d(c,x),$=C.normalMatrix,n=r.ns;if(C.flipFace){var W=u;u=t,t=W}$?(j(n,G(l(K),$)),j(n,G(l(u),$)),j(n,G(l(t),$))):(j(n,K),j(n,u),j(n,t))}},W=function(t,s,X,x,z,L,C,Q){var G=x&&x.length&&Q;L[3]===I?(o(t,s,z,L[0],L[1],L[2]),C&&H(t,X,z,C[0],C[1],C[2]),G&&S(t,x,z,Q[0],Q[1],Q[2])):(o(t,s,z,L[0],L[1],L[3]),o(t,s,z,L[1],L[2],L[3]),C&&(H(t,X,z,C[0],C[1],C[3]),H(t,X,z,C[1],C[2],C[3])),G&&(S(t,x,z,Q[0],Q[1],Q[3]),S(t,x,z,Q[1],Q[2],Q[3])))},_=function(K,V,h,p){var A,D,n,S,z,l,U,N=E,H=E,t=E,c=-E,O=-E,x=-E;for(A in K)for(l=K[A].vs,U=l.length,D=0;U>D;D+=3)n=l[D+0],S=l[D+1],z=l[D+2],N>n&&(N=n),H>S&&(H=S),t>z&&(t=z),n>c&&(c=n),S>O&&(O=S),z>x&&(x=z);if(h){var G=N+(c-N)/2,W=H+(O-H)/2,X=t+(x-t)/2;for(A in K)for(l=K[A].vs,U=l.length,D=0;U>D;D+=3)l[D+0]-=G,l[D+1]-=W,l[D+2]-=X}var q,P,d;h?(q=c-N,P=O-H,d=x-t):(q=2*J(B(N),B(c)),P=2*J(B(H),B(O)),d=2*J(B(t),B(x))),p.rawS3=[q,P,d];for(A in K){if(l=K[A].vs,V)for(U=l.length,D=0;U>D;D+=3)q&&(l[D+0]/=q),P&&(l[D+1]/=P),d&&(l[D+2]/=d);K[A].rawS3=p.rawS3}};return function(j,i,P){if(!j)return u;z.isString(i)&&(i=C(i)),P||(P={}),P.flipY==u&&(P.flipY=!0),(P.s3||P.r3||P.t3||P.mat)&&(P.matrix=z.createWorldMatrix(P.mat,P.s3,P.r3,P.rotationMode,P.t3));var F,f,B,A,N,o,h=[],R=[],b=P.ignoreNormal?u:[],d=P.reverseFlipMtls,l={vs:[],uv:[],ns:b?[]:u},e={htdefault:l},$=j.split("\n"),k=0;for(b&&P.matrix&&(P.normalMatrix=z.createNormalMatrix(P.matrix));k<$.length;k++)if(f=$[k].trim(),0!==f.length&&"#"!==f.charAt(0))if(B=V.exec(f))h.push([parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])]);else if(B=w.exec(f))R.push([parseFloat(B[1]),parseFloat(B[2])]);else if(b&&(B=s.exec(f)))P.flipFace?b.push([parseFloat(-B[1]),parseFloat(-B[2]),parseFloat(-B[3])]):b.push([parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])]);else if(B=g.exec(f))W(l,h,R,b,P,[B[1],B[2],B[3],B[4]]);else if(B=n.exec(f))W(l,h,R,b,P,[B[2],B[5],B[8],B[11]],[B[3],B[6],B[9],B[12]]);else if(B=c.exec(f))W(l,h,R,b,P,[B[2],B[6],B[10],B[14]],[B[3],B[7],B[11],B[15]],[B[4],B[8],B[12],B[16]]);else if(B=Q.exec(f))W(l,h,R,b,P,[B[2],B[5],B[8],B[11]],u,[B[3],B[6],B[9],B[12]]);else if(/^usemtl /.test(f)&&(A=f.substring(7).trim(),!(l=e[A]))){if(l={name:A,vs:[],uv:[],ns:b?[]:u},P.ignoreMtls&&P.ignoreMtls.indexOf(A)>=0&&delete l.vs,(P.reverseFlip||"*"===d||d&&d.indexOf(A)>=0)&&(l.reverseFlip=!0),i&&(N=i[A],N&&(P.ignoreColor||(l.color=N.kd),!P.ignoreTransparent&&N.d>0&&N.d<1&&(l.transparent=!0,l.opacity=N.d),!P.ignoreImage&&(o=N.map_kd)))){for(o=o.split(" "),F=0;F<o.length;F++)"-o"===o[F]?(l.uvOffset=[parseFloat(o[F+1]),parseFloat(o[F+2])],F+=2):"-s"===o[F]&&(l.uvScale=[parseFloat(o[F+1]),parseFloat(o[F+2])],F+=2);l.image=(P.prefix||"")+o[o.length-1]}e[A]=l}var U=[];for(var q in e){var G=e[q].vs;G&&0!==G.length||U.push(q)}U.forEach(function(J){delete e[J]}),_(e,P.cube,P.center,P);var v=P.shape3d;if(v){var X=[];for(var A in e){var l=e[A];X.rawS3=l.rawS3,X.push(l)}Y.setShape3dModel(v,X)}return e}}(),C=function(o){var H={};if(o)for(var m,l,j,n,g,f,Q=o.split("\n"),b=/\s+/,A=0;A<Q.length;A++)l=Q[A].trim(),0!==l.length&&"#"!==l.charAt(0)&&(j=l.indexOf(" "),n=(j?l.substring(0,j):l).toLowerCase(),g=(j?l.substring(j+1):"").trim(),"newmtl"===n?H[g]=m={name:g}:m&&("ka"===n||"kd"===n||"ks"===n?(f=g.split(b,3),m[n]=[parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2]),1]):m[n]="ns"===n||"d"===n?parseFloat(g):g));return H},e=function($,o,q){if($){var U=new XMLHttpRequest;U.onload=function(u){q(u.target.responseText)},U.onerror=function(){q(null)},U.open("GET",$,o),U.send(null)}else q(null)};z.addMethod(Y,{loadObj:function(l,L,z){z=z||{};var p=!z.sync;e(L,p,function(T){e(l,p,function(A){var O,g=z.shape3d,J=y(A,T,z);if(J)if(g)O=Y.getShape3dModel(g);else{O=[];for(var j in J){var t=J[j];O.rawS3=t.rawS3,O.push(t)}}z.finishFunc&&z.finishFunc(J,O,O.rawS3)})})},parseObj:function(H,F,r){return y(H,F,r)}})}(this,Object);