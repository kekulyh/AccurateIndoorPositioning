!function(u,s){"use strict";var B="position",H="absolute",d="relative",P="px",q="left",b="right",Y="top",j="bottom",J="display",S="none",L="block",o=ht.Default,r=o.getInternal(),c=Math.floor,E=Math.ceil,p=Math.PI,G=null,K=u.parseInt,F=function(u){return u.getContext("2d")},k=function(){return document},D=function(U){return k().createElement(U)},V=function(){return D("div")},z=function(){return D("canvas")},N=function(E,V,Y){E.style.setProperty(V,Y,G)},h=function(Q,c,U){o.def(ht.widget[Q],c,U)},O=function(C,N){C.appendChild(N)},f=function(A,B){A.removeChild(B)},y=function(C,P,z,u){C.addEventListener(P,z,!!u)},e=function(d,u,X,n){d.removeEventListener(u,X,!!n)};ht.widget.RulerFrame=function(J){var a=this,U=a._view=V(),L=a.$1k=z(),s=a.$2k=z(),t=a.$3k=z(),W=a.$4k=z();a._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},a._topRulerConfig={visible:!0},a._rightRulerConfig={visible:!1},a._bottomRulerConfig={visible:!1},a._leftRulerConfig={visible:!0},O(U,L),O(U,t),O(U,s),O(U,W),N(U,B,d),N(U,"box-sizing","border-box"),N(U,"-moz-box-sizing","border-box"),N(L,B,H),N(s,B,H),N(t,B,H),N(W,B,H),a.$14k=function(){a.$13k=1,a.iv()},a.$15k=function(A){if(a._topRulerConfig.guideVisible||a._rightRulerConfig.guideVisible||a._bottomRulerConfig.guideVisible||a._leftRulerConfig.guideVisible||a._defaultRulerConfig.guideVisible||(a._topRulerConfig.guideTipVisible||a._rightRulerConfig.guideTipVisible||a._bottomRulerConfig.guideTipVisible||a._leftRulerConfig.guideTipVisible||a._defaultRulerConfig.guideTipVisible)&&a._component){var R=U.getBoundingClientRect();a.$16k={x:A.clientX-R.left,y:A.clientY-R.top},a.$5k()}},a.setComponent(J)},h("RulerFrame",s,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(i){var V=this,D=V._component,c=V.getView();if(c){if(V._component=i,V.fp("component",D,i),D){var b=V.getComponentView(D);f(c,b),e(c,"mousemove",V.$15k),V.removeComponentPropertyChangeListener(D,V.$14k)}if(i){var C=V.getComponentView(i);O(c,C),N(C,B,H),y(c,"mousemove",V.$15k),V.addComponentPropertyChangeListener(i,V.$14k)}}},addComponentPropertyChangeListener:function(p,v){p&&p.mp&&p.mp(v)},removeComponentPropertyChangeListener:function(S,j){S&&S.ump&&S.ump(j)},getComponentHZoom:function(h){return h&&h.getZoom?h.getZoom():1},getComponentVZoom:function(o){return o&&o.getZoom?o.getZoom():1},getComponentViewRect:function(e){return e&&e.getViewRect?e.getViewRect():void 0},getComponentView:function(H){return H&&H.getView?H.getView():H},invalidateComponent:function(S){S&&S.iv&&S.iv()},validateComponent:function(f){f&&f.validate&&f.validate()},$7k:function(C,A,j,Y,Q,O,n,o,c,W,_,k){if(A.visible){var U=this._defaultRulerConfig,e="borderStyle",s="borderColor",p="borderWidth",T="background",E=A[e]||U[e],t=A[s]||U[s],f=A[p]||U[p],B=A.size!=G?A.size:U.size,y=A[T]||U[T],X=B+f,u=this.$6k(f,E,t,C,j,Q,X,n,o,c,W,_,k);N(C,Q,"0px"),O?r.setCanvas(C,Y-u,B):r.setCanvas(C,B,Y-u),N(C,"background",y),N(C,J,L)}else N(C,J,S),N(this.getComponentView(this._component),Q,"0px")},$6k:function(i,S,x,t,b,$,J,K,Y,R,A,X,s){var W=0;return N(t,b,i+"px "+S+" "+x),N(this.getComponentView(this._component),$,J+P),K?(N(t,Y,R+P),W+=R):N(t,Y,"0px"),A?(N(t,X,s+P),W+=s):N(t,X,"0px"),W},validateImpl:function(){var n=this,J=n._component,R=n.$1k,$=n.$2k,x=n.$3k,N=n.$4k,l=n._view,I=n._defaultRulerConfig,c=n._topRulerConfig,p=n._rightRulerConfig,Q=n._bottomRulerConfig,y=n._leftRulerConfig,X=I.size;if(l&&J){var C=c.size!=G?c.size:X,e=p.size!=G?p.size:X,H=Q.size!=G?Q.size:X,t=y.size!=G?y.size:X;n.$7k(R,c,"border-bottom",l.offsetWidth,Y,!0,y.visible,q,t,p.visible,b,e),n.$7k($,p,"border-left",l.offsetHeight,b,!1,c.visible,Y,C,Q.visible,j,H),n.$7k(x,Q,"border-top",l.offsetWidth,j,!0,y.visible,q,t,p.visible,b,e),n.$7k(N,y,"border-right",l.offsetHeight,q,!1,c.visible,Y,C,Q.visible,j,H),n.$13k?delete n.$13k:n.invalidateComponent(J),n.validateComponent(J),n.$5k()}},$5k:function(){function b(h,e,A,o,R,c){if(e.visible){var X=F(h),S=e[u]||L,M=e[g]!=G?e[g]:H,b=e[D]||N,O=e[P]||K,_=e.size!=G?e.size:z,Ej=e[q]||W,Vh=e[C]||w,$d=e[E]||d,pj=e[p]!=G?e[p]:V,gm=e[r]!=G?e[r]:t,Le=e[$]!=G?e[$]:a,Go=e[l]!=G?e[l]:Y,tp=e[k]!=G?e[k]:x,gl=e[Q]!=G?e[Q]:Z,yg=e[j]||Wo,Jo=e[i]||Mj;M&&(S=y[c]=y.$8k(y[c]||S,e[s]||I,e[n]||B,o?U:m,Vh)),A.call(y,X,T,J,f,v,_,o?U:m,S,b,O,R,Ej,$d);var wi=y.$16k;(pj||gm)&&wi&&(o?y.$9k(X,wi.x,_,yg,Jo,pj,gm,Le,Go,tp,gl):y.$10k(X,wi.y,_,yg,Jo,pj,gm,Le,Go,tp,gl,R))}}var y=this,c=y.$1k,o=y.$2k,h=y.$3k,S=y.$4k,X=y._topRulerConfig,e=y._rightRulerConfig,O=y._bottomRulerConfig,A=y._leftRulerConfig,R=y._defaultRulerConfig,_=y._component,M=y.getComponentViewRect(_),U=y.getComponentHZoom(_),m=y.getComponentVZoom(_),T=M.x*U,f=T+M.width*U,J=M.y*m,v=J+M.height*m,z=y._defaultRulerConfig.size,u="defaultMajorTickSpacing",s="maxPhysicalMajorTickSpacing",n="minPhysicalMajorTickSpacing",g="tickSpacingAdaptable",D="majorTickTextFont",P="majorTickTextColor",q="majorTickColor",E="minorTickColor",p="guideVisible",r="guideTipVisible",$="guideTipBorderColor",l="guideTipTextColor",k="guideTipTextFont",Q="guideTipBackground",j="guideColor",i="guideWidth",C="minMajorTickSpacing",L=R[u],I=R[s],B=R[n],H=R[g],N=R[D],K=R[P],W=R[q],w=R[C],d=R[E],V=R[p],t=R[r],a=R[$],Y=R[l],x=R[k],Z=R[Q],Wo=R[j],Mj=R[i];y._view&&_&&(b(c,X,y.$11k,!0,!1,"_currentTopMajorTickSpacing"),b(o,e,y.$12k,!1,!0,"_currentRightMajorTickSpacing"),b(h,O,y.$11k,!0,!0,"_currentBottomMajorTickSpacing"),b(S,A,y.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(V,s,j,$,y){return j>V*$?V=c(s/$/y)*y:V*$>s&&(V=E(j/$/y)*y),V},getHTipText:function(b){var i=this,t=i._component,f=0,N=i._view.getBoundingClientRect();return t.lp?f=K(t.lp({clientX:b.x+N.left,clientY:b.y}).x):f-=K(this.getComponentView(t).style.left)||0,f},$9k:function(M,D,B,i,u,_,L,I,W,d,T){var O=this,H=O._component;M.save(),r.translateAndScale(M,0,0,1);var Z=D-(K(this.getComponentView(H).style.left)||0),x=0;if(D=O.getHTipText(O.$16k),_&&(M.beginPath(),M.fillStyle=i,M.rect(Z,x,u,B),M.fill()),L){M.beginPath(),M.textAlign="center",M.textBaseline="middle",M.font=d;var w=M.measureText(D).width+6;M.fillStyle=T,M.rect(Z-w/2,x,w,B),M.fill(),M.strokeStyle=I,M.stroke(),M.beginPath(),M.fillStyle=W,M.fillText(D,Z,x+B/2)}M.restore()},getVTipText:function(v){var i=this,y=i._component,o=0,Z=i._view.getBoundingClientRect();return y.lp?o=K(y.lp({clientX:v.x,clientY:v.y+Z.top}).y):o-=K(this.getComponentView(y).style.top)||0,o},formatScaleText:function(f){return Math.round(f)},$10k:function(S,n,t,_,N,F,A,O,s,X,i,Z){var D=this,w=D._component;S.save(),r.translateAndScale(S,0,0,1);var f=t/2,v=n-(K(this.getComponentView(w).style.top)||0);if(n=D.getVTipText(D.$16k),F&&(S.beginPath(),S.fillStyle=_,S.rect(f-t/2,v,t,N),S.fill()),A){S.translate(f,v),S.rotate((Z?90:-90)*p/180),S.translate(-f,-v),S.beginPath(),S.textAlign="center",S.textBaseline="middle",S.font=X;var c=S.measureText(n).width+6;S.fillStyle=i,S.rect(f-c/2,v-t/2,c,t),S.fill(),S.strokeStyle=O,S.stroke(),S.fillStyle=s,S.fillText(n,f,v)}S.restore()},$11k:function(q,f,s,T,G,j,E,$,C,g,J,_,Q){q.save(),s=0;var t=f,z=T,Y=(t+z)/2;f=0,T=z-t,r.translateAndScale(q,0,0,1);var d=0,S=0,o=K(j/2),V=j-o,b=J?0:o,v=$*E,U=v/10;f-=v,T+=v,q.clearRect(f,0,T-f,j),q.beginPath(),q.fillStyle=Q;var L=c(Y/U)*U-t;for(d=L;T>d;d+=U)q.rect(d,s+b,1,V);for(d=L;d>f;d-=U)q.rect(d,s+b,1,V);for(q.fill(),b=J?0:1,q.beginPath(),q.fillStyle=_,L=c(Y/v)*v-t,d=L;T>d;d+=v)q.rect(d,s+b,1,j-1);for(d=L;d>f;d-=v)q.rect(d,s+b,1,j-1);q.fill();var N=K(/\d+px/.exec(C)[0]),e=(N||10)/2;q.textBaseline="middle",b=J?j-e-2:e+2,q.beginPath(),q.fillStyle=g,q.font=C;var M=c(Y/v)*v/E;for(d=L,S=M;T>d;d+=v,S+=$){var w=this.getHScaleText?this.getHScaleText(d):S;q.fillText(this.formatScaleText(w),d+2,s+b)}for(d=L,S=M;d>f;d-=v,S-=$){var w=this.getHScaleText?this.getHScaleText(d):S;q.fillText(this.formatScaleText(w),d+2,s+b)}q.restore()},$12k:function(X,y,D,l,x,Q,_,z,$,N,j,u,C){function V(l,x,g,u,O,Q){O=t.getVScaleText?t.getVScaleText(g):O,O=t.formatScaleText(O),X.translate(l+x,g),X.rotate(-u),X.translate(-l-x,-g),X.fillText(O,l+x+(Q?2:1),g),X.translate(l+x,g),X.rotate(u),X.translate(-l-x,-g)}X.save(),y=0;var E=D,I=x,m=(E+I)/2;D=0,x=I-E,r.translateAndScale(X,0,0,1);var g=0,t=this,P=0,w=K(Q/2),Z=Q-w,A=j?0:w,J=z*_,a=J/10;D-=J,x+=J,X.clearRect(y,0,Q,x-D),X.beginPath(),X.fillStyle=C;var o=c(m/a)*a-E;for(g=o;x>g;g+=a)X.rect(y+A,g,Z,1);for(g=o;g>D;g-=a)X.rect(y+A,g,Z,1);for(X.fill(),A=j?0:1,X.beginPath(),X.fillStyle=u,o=c(m/J)*J-E,g=o;x>g;g+=J)X.rect(y+A,g,Q-1,1);for(g=o;g>D;g-=J)X.rect(y+A,g,Q-1,1);X.fill();var d=K(/\d+px/.exec($)[0]),h=(d||10)/2,O=90*p/180;X.textBaseline="middle",A=j?Q-h:h+2,O=j?-O:O,X.beginPath(),X.fillStyle=N,X.font=$;var G=c(m/J)*J/_;for(g=o,P=G;x>g;g+=J,P+=z)V(y,A,g,O,P,j);for(g=o,P=G;g>D;g-=J,P-=z)V(y,A,g,O,P,j);X.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var N=this,o=N._component,P=N._view;o&&N.removeComponentPropertyChangeListener(o,N.$14k),P&&(e(P,"mousemove",N.$15k),f(P.parentNode,P),N._view=null)}})}(this,Object);