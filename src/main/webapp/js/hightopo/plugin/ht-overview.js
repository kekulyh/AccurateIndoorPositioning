!function(R,$){"use strict";var T="ht",H=T+".graph.",W=R[T],d=W.graph,Y=W.Default,Q=W.Color,w=null,G="px",B=Y.getInternal(),f=B.getPinchDist,r=Y.preventDefault,x=Y.getTouchCount,p=Y.startDragging;B.addMethod(Y,{overviewBackground:Q.widgetBackground,overviewMaskBackground:Q.transparent,overviewContentBorderColor:Q.widgetBorder,overviewContentBackground:Q.background},!0),d.Overview=function(L){var $=this,w=$._view=B.createDiv(1);$._canvas=B.createCanvas(w),w.style.background=Y.overviewBackground,w.appendChild($._mask=B.createDiv()),$.gv=L,$.redraw(),$.addListeners(),L.addViewListener($.handleView,$)},Y.def(H+"Overview",$,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:Y.overviewMaskBackground,_contentBorderColor:Y.overviewContentBorderColor,_contentBackground:Y.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var w=this;w.gv.removeViewListener(w.handleView,w)},onPropertyChanged:function(){this.redraw()},handleView:function(M){this._autoUpdate&&"validate"===M.kind&&this.redraw()},redraw:function(){var X=this;X._redraw||(X._redraw=1,X.iv(50))},validateImpl:function(){var g=this,_=g.gv,h=g._canvas,b=g._mask,F=b.style,n=g.getWidth(),D=g.getHeight(),u=_.getViewRect(),C=_.getScrollRect(),s=C.x,z=C.y,H=C.width,k=C.height,y=g._rate=Math.max(H/n,k/D),J=g._x=(n-H/y)/2,p=g._y=(D-k/y)/2,Q=g._redraw;if(0!==u.width&&0!==u.height||g.hasRetry||(Y.callLater(g.iv,g,w),g.hasRetry=!0),(n!==h.clientWidth||D!==h.clientHeight)&&(B.setCanvas(h,n,D,1),Q=1),B.isSameRect(C,g._scrollRect)||(g._scrollRect=C,Q=1),Q){var I=B.initContext(h),e=g._contentBackground,q=g._contentBorderColor;I.clearRect(0,0,n,D),e&&B.fillRect(I,J,p,H/y,k/y,e),q&&B.drawBorder(I,q,J,p,H/y,k/y),I.translate(-s/y+J,-z/y+p),I.scale(1/y,1/y),_._42(I),I.restore()}F.background=g._maskBackground,F.left=J+(u.x-s)/y+G,F.top=p+(u.y-z)/y+G,F.width=u.width/y+G,F.height=u.height/y+G,delete g._redraw},center:function(g){var e=this,L=e.gv,t=L._zoom,c=L._29I,T=e._rate,O=e._scrollRect,I=Y.getLogicalPoint(g,e._canvas),y=O.x+(I.x-e._x)*T,H=O.y+(I.y-e._y)*T;L.setTranslate((c.width/2-y)*t,(c.height/2-H)*t)},handle_mousedown:function(b){this.handle_touchstart(b)},handleWindowMouseUp:function(s){this.handleWindowTouchEnd(s)},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handle_mousewheel:function(O){this.handleScroll(O,O.wheelDelta)},handle_DOMMouseScroll:function($){2===$.axis&&this.handleScroll($,-$.detail)},handleScroll:function(S,z){r(S);var P=this.gv;z>0?P.scrollZoomIn():0>z&&P.scrollZoomOut()},handle_touchstart:function(y){if(r(y),Y.isLeftButton(y)){var _=this,o=_.gv,H=x(y);1===H?Y.isDoubleClick(y)&&o.isResettable()?o.reset():(_.center(y),p(_,y)):2===H&&(_._dist=f(y),p(_,y))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(Q){var G=this,A=G._dist,R=x(Q);1===R?G.center(Q):2===R&&A!=w&&G.gv.handlePinch(w,f(Q),A)}})}(this,Object);