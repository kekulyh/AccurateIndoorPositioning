!function(k){"use strict";var P="ht",Z=k[P],j=Math,S=j.max,X=j.min,E=j.abs,K=j.atan2,V=j.cos,w=j.sin,N=j.ceil,r=Z.Default,W=r.getInternal(),A=Z.List,u=W.Mat,l=W.getNodeRect,D=W.intersectionLineRect,F=r.getDistance,s=r.setEdgeType,p="left",g="right",H="top",o="bottom",J="edge.type",e="edge.gap",x="edge.center",h="edge.extend",Q=function(A,w){return l(A,w).width},y=function(S,R){return l(S,R).height},U=function(v,f){var Q=W.getPosition(f.s("edge.source.position"),l(v,f._40I));return Q.x+=f.s("edge.source.offset.x"),Q.y+=f.s("edge.source.offset.y"),Q},L=function(e,r){var F=W.getPosition(r.s("edge.target.position"),l(e,r._41I));return F.x+=r.s("edge.target.offset.x"),F.y+=r.s("edge.target.offset.y"),F},Y=function(U,b){var t=U.s(J),Q=U.getEdgeGroup();if(Q){var F=0;if(Q.eachSiblingEdge(function(f){b.isVisible(f)&&f.s(J)==t&&F++}),F>1)return U.s(e)*(F-1)/2}return 0},c=function(z,Y){var r=z.s(J),L=z.isLooped();if(!z.getEdgeGroup())return L?z.s(e):0;var V,H=0,k=0,w=0;return z.getEdgeGroup().getSiblings().each(function(i){i.each(function(E){if(E._40I===z._40I&&E.s(J)==r&&Y.isVisible(E)){var t=E.s(e);V?(k+=w/2+t/2,w=t):(V=E,w=t),E===z&&(H=k)}})}),L?k-H+w:H-k/2},a=function(j,h){var m=j.size(),C=h.s("edge.corner.radius");if(0===C)return{points:j,segments:new A([1,m])};if(0>C)return{points:j};var $,v=new A,_=new A,G=j.get(0);v.add(G),_.add(1);for(var W=1;m>W;W++)if(m>W+1){var O=j.get(W),k=j.get(W+1),I=G.x,d=G.y,n=O.x,B=O.y,L=B-d,a=n-I,f=K(L,a);$=X(.99*F(G,O),C),v.add({x:n-$*V(f),y:B-$*w(f)}),v.add(O),I=O.x,d=O.y,n=k.x,B=k.y,L=B-d,a=n-I,f=K(L,a),$=X(.99*F(O,k),C),G={x:I+$*V(f),y:d+$*w(f)},v.add(G),_.addAll([2,3])}else v.add(j.get(W)),_.add(2);return{points:v,segments:_}};W.addMethod(Z.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),s("boundary",function(I,B,J,b){b||(B=-B);var i,H=U(J,I),Y=L(J,I),h=l(J,I._40I),G=l(J,I._41I),n=new u(K(Y.y-H.y,Y.x-H.x)),T=F(H,Y),$=H.x,X=H.y;return i=n.tf(0,B),H={x:i.x+$,y:i.y+X},i=n.tf(T,B),Y={x:i.x+$,y:i.y+X},i=D(H,Y,h),i&&(H={x:i[0],y:i[1]}),i=D(H,Y,G),i&&(Y={x:i[0],y:i[1]}),{points:new A([H,Y])}}),s("ripple",function(g,n,s,J){J||(n=-n);var p=U(s,g),V=L(s,g),z=F(p,V),t=X(g.s("edge.offset"),z/2),D=g.s("edge.ripple.size"),O=g.s("edge.ripple.length"),Q=g.s("edge.ripple.both"),k=g.s(x),E=g.s("edge.ripple.elevation"),S=new A,q=g.s("edge.ripple.straight")?null:new A,i=new u(K(V.y-p.y,V.x-p.x));J||(E=-E),z-=2*t,O>0&&(D=N(z/O));var c=z/D;q&&q.add(1);for(var f=0;D>f;f++)q&&q.add(3),0===f?S.add({x:t+c*f,y:k?0:n}):S.add({x:t+c*f,y:n}),S.add({x:t+c*f+c/2,y:E+n}),Q&&(E=-E);for(S.add({x:t+z,y:k?0:n}),f=0;f<S.size();f++){var b=i.tf(S.get(f));b.x+=p.x,b.y+=p.y,S.set(f,b)}return{points:S,segments:q}}),s("h.v",function(b,l,B){l=c(b,B);var u=new A,W=b.s(x),R=U(B,b),I=R.x,J=R.y,G=L(B,b),w=G.x,e=G.y,P=0,K=0,o=w-I,V=e-J;return W||(P=Q(B,b._40I)/2,K=y(B,b._41I)/2),o>=0&&0>=V?(u.add({x:I+P,y:J+l}),u.add({x:w+l,y:J+l}),u.add({x:w+l,y:e+K})):0>=o&&V>=0?(u.add({x:I-P,y:J+l}),u.add({x:w+l,y:J+l}),u.add({x:w+l,y:e-K})):o>=0&&V>=0?(u.add({x:I+P,y:J+l}),u.add({x:w-l,y:J+l}),u.add({x:w-l,y:e-K})):(u.add({x:I-P,y:J+l}),u.add({x:w-l,y:J+l}),u.add({x:w-l,y:e+K})),a(u,b)}),s("v.h",function(v,m,o){m=c(v,o);var K=new A,J=v.s(x),S=U(o,v),N=S.x,s=S.y,t=L(o,v),z=t.x,P=t.y,j=0,Y=0,i=z-N,D=P-s;return J||(j=Q(o,v._41I)/2,Y=y(o,v._40I)/2),i>=0&&0>=D?(K.add({x:N+m,y:s-Y}),K.add({x:N+m,y:P+m}),K.add({x:z-j,y:P+m})):0>=i&&D>=0?(K.add({x:N+m,y:s+Y}),K.add({x:N+m,y:P+m}),K.add({x:z+j,y:P+m})):i>=0&&D>=0?(K.add({x:N-m,y:s+Y}),K.add({x:N-m,y:P+m}),K.add({x:z-j,y:P+m})):(K.add({x:N-m,y:s-Y}),K.add({x:N-m,y:P+m}),K.add({x:z+j,y:P+m})),a(K,v)}),s("ortho",function(f,C,S){var i=new A,T=f.s(x),V=f.s("edge.ortho"),K=f._40I,k=f._41I,t=U(S,f),z=t.x,q=t.y,h=L(S,f),O=h.x,r=h.y,Y=O-z,D=r-q,p=T?0:Q(S,K)/2,w=T?0:y(S,K)/2,Z=T?0:Q(S,k)/2,W=T?0:y(S,k)/2,G=(Y-(p+Z)*(Y>0?1:-1))*V,s=(D-(w+W)*(D>0?1:-1))*V;return E(Y)<E(D)?Y>=0&&0>=D?(i.add({x:z+C,y:q-w}),i.add({x:z+C,y:q+s+C-w}),i.add({x:O+C,y:q+s+C-w}),i.add({x:O+C,y:r+W})):0>=Y&&D>=0?(i.add({x:z+C,y:q+w}),i.add({x:z+C,y:q+s+C+w}),i.add({x:O+C,y:q+s+C+w}),i.add({x:O+C,y:r-W})):Y>=0&&D>=0?(i.add({x:z+C,y:q+w}),i.add({x:z+C,y:q+s-C+w}),i.add({x:O+C,y:q+s-C+w}),i.add({x:O+C,y:r-W})):(i.add({x:z+C,y:q-w}),i.add({x:z+C,y:q+s-C-w}),i.add({x:O+C,y:q+s-C-w}),i.add({x:O+C,y:r+W})):Y>=0&&0>=D?(i.add({x:z+p,y:q+C}),i.add({x:z+G+C+p,y:q+C}),i.add({x:z+G+C+p,y:r+C}),i.add({x:O-Z,y:r+C})):0>=Y&&D>=0?(i.add({x:z-p,y:q+C}),i.add({x:z+G+C-p,y:q+C}),i.add({x:z+G+C-p,y:r+C}),i.add({x:O+Z,y:r+C})):Y>=0&&D>=0?(i.add({x:z+p,y:q+C}),i.add({x:z+G-C+p,y:q+C}),i.add({x:z+G-C+p,y:r+C}),i.add({x:O-Z,y:r+C})):(i.add({x:z-p,y:q+C}),i.add({x:z+G-C-p,y:q+C}),i.add({x:z+G-C-p,y:r+C}),i.add({x:O+Z,y:r+C})),a(i,f)}),s("flex",function(l,k,F){var T=new A,D=l.s("edge.flex")+Y(l,F),j=l.s(x),v=l._40I,g=l._41I,r=U(F,l),w=r.x,Z=r.y,h=L(F,l),p=h.x,o=h.y,$=p-w,I=o-Z,f=j?0:Q(F,v)/2,P=j?0:y(F,v)/2,X=j?0:Q(F,g)/2,C=j?0:y(F,g)/2,t=$>0?D:-D,S=I>0?D:-D;return E($)<E(I)?$>=0&&0>=I?(T.add({x:w+k,y:Z-P}),T.add({x:w+k,y:Z+S+k-P}),T.add({x:p+k,y:o-S+k+C}),T.add({x:p+k,y:o+C})):0>=$&&I>=0?(T.add({x:w+k,y:Z+P}),T.add({x:w+k,y:Z+S+k+P}),T.add({x:p+k,y:o-S+k-C}),T.add({x:p+k,y:o-C})):$>=0&&I>=0?(T.add({x:w+k,y:Z+P}),T.add({x:w+k,y:Z+S-k+P}),T.add({x:p+k,y:o-S-k-C}),T.add({x:p+k,y:o-C})):(T.add({x:w+k,y:Z-P}),T.add({x:w+k,y:Z+S-k-P}),T.add({x:p+k,y:o-S-k+C}),T.add({x:p+k,y:o+C})):$>=0&&0>=I?(T.add({x:w+f,y:Z+k}),T.add({x:w+t+k+f,y:Z+k}),T.add({x:p-t+k-X,y:o+k}),T.add({x:p-X,y:o+k})):0>=$&&I>=0?(T.add({x:w-f,y:Z+k}),T.add({x:w+t+k-f,y:Z+k}),T.add({x:p-t+k+X,y:o+k}),T.add({x:p+X,y:o+k})):$>=0&&I>=0?(T.add({x:w+f,y:Z+k}),T.add({x:w+t-k+f,y:Z+k}),T.add({x:p-t-k-X,y:o+k}),T.add({x:p-X,y:o+k})):(T.add({x:w-f,y:Z+k}),T.add({x:w+t-k-f,y:Z+k}),T.add({x:p-t-k+X,y:o+k}),T.add({x:p+X,y:o+k})),a(T,l)}),s("extend.east",function(D,E,V){var B=new A,R=D.s(h)+Y(D,V),c=D.s(x),n=U(V,D),W=n.x+(c?0:Q(V,D._40I)/2),d=n.y,O=L(V,D),J=O.x+(c?0:Q(V,D._41I)/2),N=O.y,j=S(W,J)+R;return d>N?(B.add({x:W,y:d+E}),B.add({x:j+E,y:d+E}),B.add({x:j+E,y:N-E}),B.add({x:J,y:N-E})):(B.add({x:W,y:d-E}),B.add({x:j+E,y:d-E}),B.add({x:j+E,y:N+E}),B.add({x:J,y:N+E})),a(B,D)}),s("extend.west",function(M,u,P){var W=new A,p=M.s(h)+Y(M,P),S=M.s(x),B=U(P,M),i=B.x-(S?0:Q(P,M._40I)/2),k=B.y,$=L(P,M),f=$.x-(S?0:Q(P,M._41I)/2),b=$.y,q=X(i,f)-p;return k>b?(W.add({x:i,y:k+u}),W.add({x:q-u,y:k+u}),W.add({x:q-u,y:b-u}),W.add({x:f,y:b-u})):(W.add({x:i,y:k-u}),W.add({x:q-u,y:k-u}),W.add({x:q-u,y:b+u}),W.add({x:f,y:b+u})),a(W,M)}),s("extend.north",function(F,k,S){var w=new A,p=F.s(h)+Y(F,S),T=F.s(x),r=U(S,F),v=r.x,N=r.y-(T?0:y(S,F._40I)/2),_=L(S,F),J=_.x,E=_.y-(T?0:y(S,F._41I)/2),R=X(N,E)-p;return v>J?(w.add({y:N,x:v+k}),w.add({y:R-k,x:v+k}),w.add({y:R-k,x:J-k}),w.add({y:E,x:J-k})):(w.add({y:N,x:v-k}),w.add({y:R-k,x:v-k}),w.add({y:R-k,x:J+k}),w.add({y:E,x:J+k})),a(w,F)}),s("extend.south",function(N,P,m){var B=new A,H=N.s(h)+Y(N,m),v=N.s(x),D=U(m,N),R=D.x,s=D.y+(v?0:y(m,N._40I)/2),E=L(m,N),O=E.x,o=E.y+(v?0:y(m,N._41I)/2),z=S(s,o)+H;return R>O?(B.add({y:s,x:R+P}),B.add({y:z+P,x:R+P}),B.add({y:z+P,x:O-P}),B.add({y:o,x:O-P})):(B.add({y:s,x:R-P}),B.add({y:z+P,x:R-P}),B.add({y:z+P,x:O+P}),B.add({y:o,x:O+P})),a(B,N)});var _=function(h,b,K,E,R){if(E.sort(function(G,o){var l=G.getSourceAgent()===b?G.getTargetAgent():G.getSourceAgent(),h=o.getSourceAgent()===b?o.getTargetAgent():o.getSourceAgent(),$=l.p(),k=h.p();if(K===p||K===g){if($.y>k.y)return 1;if($.y<k.y)return-1}else{if($.x>k.x)return 1;if($.x<k.x)return-1}return r.sortFunc(G.getId(),o.getId())}),R){for(var Q,S,u,f=h.getSourceAgent(),X=h.getTargetAgent(),D=0;D<E.size();D++){var F=E.get(D);F.getSourceAgent()===f&&F.getTargetAgent()===X||F.getTargetAgent()===f&&F.getSourceAgent()===X?(S||(S=new A),S.add(F,0)):S?(u||(u=new A),u.add(F)):(Q||(Q=new A),Q.add(F))}E.clear(),Q&&E.addAll(Q),S&&E.addAll(S),u&&E.addAll(u)}var Z=E.indexOf(h),k=E.size(),J=h.s(e);return{side:K,index:Z,size:k,offset:-J*(k-1)/2+J*Z}},T=function(R,U,c,u,Q){var b=U.s(J);return _(U,c,u,c.getAgentEdges().toList(function(q){return R.isVisible(q)&&q.s(J)===b}),Q)},i=function(U,z){var i=U.getSourceAgent()===z?U.getTargetAgent():U.getSourceAgent(),v=z.p(),Q=i.p(),t=Q.x-v.x,Y=Q.y-v.y;return t>0&&E(Y)<=t?g:0>t&&E(Y)<=-t?p:Y>0&&E(t)<=Y?o:H},z=function(q,p,X){var U=p.s(J),I=i(p,X);return _(p,X,I,X.getAgentEdges().toList(function(Z){return q.isVisible(Z)&&Z.s(J)===U&&i(Z,X)===I}))},G=function(n,S){var s=n.getSourceAgent()===S,U=s?n.getTargetAgent():n.getSourceAgent(),N=S.p(),w=U.p();return s?N.y>w.y?H:o:N.x<w.x?g:p},R=function(u,F,V){var H=F.s(J),p=G(F,V);return _(F,V,p,V.getAgentEdges().toList(function(e){return u.isVisible(e)&&e.s(J)===H&&G(e,V)===p}),p===g||p===o)},I=function(r,S){var k=r.getSourceAgent()===S,m=k?r.getTargetAgent():r.getSourceAgent(),e=S.p(),i=m.p();return k?e.x<i.x?g:p:e.y>i.y?H:o},M=function(s,M,y){var k=M.s(J),E=I(M,y);return _(M,y,E,y.getAgentEdges().toList(function(F){return s.isVisible(F)&&F.s(J)===k&&I(F,y)===E}),E===g||E===o)},t=function(b,Y,C){var l=b.getSourceAgent(),P=b.getTargetAgent(),B=l.getId()>P.getId(),T=B?P:l,S=B?l:P,k=T.p(),f=S.p(),v=C(Y,b,T),R=C(Y,b,S),V=b.s(x),D=V?0:Q(Y,T)/2,_=V?0:Q(Y,S)/2,N=V?0:y(Y,T)/2,h=V?0:y(Y,S)/2,W=v.offset,u=R.offset,d=v.side,E=R.side,J=new A;return d===H?(J.add({x:k.x+W,y:k.y-N}),J.add({x:k.x+W,y:f.y+u}),E===p?J.add({x:f.x-_,y:f.y+u}):J.add({x:f.x+_,y:f.y+u})):d===o?(J.add({x:k.x+W,y:k.y+N}),J.add({x:k.x+W,y:f.y+u}),E===p?J.add({x:f.x-_,y:f.y+u}):J.add({x:f.x+_,y:f.y+u})):d===p?(J.add({x:k.x-D,y:k.y+W}),J.add({x:f.x+u,y:k.y+W}),E===o?J.add({x:f.x+u,y:f.y+h}):J.add({x:f.x+u,y:f.y-h})):d===g&&(J.add({x:k.x+D,y:k.y+W}),J.add({x:f.x+u,y:k.y+W}),E===o?J.add({x:f.x+u,y:f.y+h}):J.add({x:f.x+u,y:f.y-h})),B&&J.reverse(),a(J,b)};s("ortho2",function(f,V,k){var O,i,B=f.s(x),t=f.s("edge.ortho"),s=f.getSourceAgent(),n=f.getTargetAgent(),C=s.getId()>n.getId(),u=C?n:s,h=C?s:n,W=u.p(),w=h.p(),m=z(k,f,u),b=z(k,f,h),e=B?0:Q(k,u)/2,N=B?0:y(k,u)/2,T=B?0:Q(k,h)/2,d=B?0:y(k,h)/2,P=new A,R=m.offset,G=b.offset,q=m.side;return q===g?(O=w.y>W.y?-R:R,i=W.x+e+(w.x-T-W.x-e)*t,P.add({x:W.x+e,y:W.y+R}),P.add({x:i+O,y:W.y+R}),P.add({x:i+O,y:w.y+G}),P.add({x:w.x-T,y:w.y+G})):q===p?(O=w.y>W.y?-R:R,i=W.x-e-(W.x-e-w.x-T)*t,P.add({x:W.x-e,y:W.y+R}),P.add({x:i-O,y:W.y+R}),P.add({x:i-O,y:w.y+G}),P.add({x:w.x+T,y:w.y+G})):q===o?(O=w.x>W.x?-R:R,i=W.y+N+(w.y-d-W.y-N)*t,P.add({x:W.x+R,y:W.y+N}),P.add({x:W.x+R,y:i+O}),P.add({x:w.x+G,y:i+O}),P.add({x:w.x+G,y:w.y-d})):q===H&&(O=w.x>W.x?-R:R,i=W.y-N-(W.y-N-w.y-d)*t,P.add({x:W.x+R,y:W.y-N}),P.add({x:W.x+R,y:i-O}),P.add({x:w.x+G,y:i-O}),P.add({x:w.x+G,y:w.y+d})),C&&P.reverse(),a(P,f)},!0),s("flex2",function(B,t,F){var G,O=B.getSourceAgent(),v=B.getTargetAgent(),K=O.getId()>v.getId(),i=K?v:O,P=K?O:v,I=i.p(),S=P.p(),l=z(F,B,i),q=z(F,B,P),b=B.s(x),Y=B.s("edge.flex")+(l.size-1)/2*B.s(e),Z=b?0:Q(F,i)/2,M=b?0:y(F,i)/2,U=b?0:Q(F,P)/2,W=b?0:y(F,P)/2,h=new A,V=l.offset,k=q.offset,C=l.side;return C===g?(G=S.y>I.y?-V:V,h.add({x:I.x+Z,y:I.y+V}),h.add({x:I.x+Z+Y+G,y:I.y+V}),h.add({x:S.x-U-Y+G,y:S.y+k}),h.add({x:S.x-U,y:S.y+k})):C===p?(G=S.y>I.y?-V:V,h.add({x:I.x-Z,y:I.y+V}),h.add({x:I.x-Z-Y-G,y:I.y+V}),h.add({x:S.x+U+Y-G,y:S.y+k}),h.add({x:S.x+U,y:S.y+k})):C===o?(G=S.x>I.x?-V:V,h.add({x:I.x+V,y:I.y+M}),h.add({x:I.x+V,y:I.y+M+Y+G}),h.add({x:S.x+k,y:S.y-W-Y+G}),h.add({x:S.x+k,y:S.y-W})):C===H&&(G=S.x>I.x?-V:V,h.add({x:I.x+V,y:I.y-M}),h.add({x:I.x+V,y:I.y-M-Y-G}),h.add({x:S.x+k,y:S.y+W+Y-G}),h.add({x:S.x+k,y:S.y+W})),K&&h.reverse(),a(h,B)},!0),s("extend.north2",function(c,K,r){var W=c.getSourceAgent(),t=c.getTargetAgent(),u=W.getId()>t.getId(),F=u?t:W,$=u?W:t,q=F.p(),U=$.p(),E=T(r,c,F,H),L=T(r,c,$,H,!0),m=c.s(x),k=m?0:y(r,F)/2,V=m?0:y(r,$)/2,d=E.offset,w=L.offset,Q=c.s(h)+(E.size-1)/2*c.s(e),i=X(q.y-k,U.y-V)-Q+(q.x<U.x?d:-d),v=new A;return v.add({x:q.x+d,y:q.y-k}),v.add({x:q.x+d,y:i}),v.add({x:U.x+w,y:i}),v.add({x:U.x+w,y:U.y-V}),u&&v.reverse(),a(v,c)},!0),s("extend.south2",function(s,Q,z){var g=s.getSourceAgent(),Z=s.getTargetAgent(),b=g.getId()>Z.getId(),F=b?Z:g,c=b?g:Z,W=F.p(),B=c.p(),j=T(z,s,F,o),N=T(z,s,c,o,!0),v=s.s(x),E=v?0:y(z,F)/2,m=v?0:y(z,c)/2,X=j.offset,I=N.offset,H=s.s(h)+(j.size-1)/2*s.s(e),$=S(W.y+E,B.y+m)+H+(W.x>B.x?X:-X),R=new A;return R.add({x:W.x+X,y:W.y+E}),R.add({x:W.x+X,y:$}),R.add({x:B.x+I,y:$}),R.add({x:B.x+I,y:B.y+m}),b&&R.reverse(),a(R,s)},!0),s("extend.west2",function(E,W,U){var n=E.getSourceAgent(),y=E.getTargetAgent(),C=n.getId()>y.getId(),d=C?y:n,o=C?n:y,L=d.p(),Z=o.p(),O=T(U,E,d,H),g=T(U,E,o,H,!0),M=E.s(x),N=M?0:Q(U,d)/2,v=M?0:Q(U,o)/2,p=O.offset,V=g.offset,S=E.s(h)+(O.size-1)/2*E.s(e),b=X(L.x-N,Z.x-v)-S+(L.y<Z.y?p:-p),t=new A;return t.add({x:L.x-N,y:L.y+p}),t.add({x:b,y:L.y+p}),t.add({x:b,y:Z.y+V}),t.add({x:Z.x-v,y:Z.y+V}),C&&t.reverse(),a(t,E)},!0),s("extend.east2",function(m,c,L){var o=m.getSourceAgent(),C=m.getTargetAgent(),v=o.getId()>C.getId(),i=v?C:o,$=v?o:C,V=i.p(),b=$.p(),D=T(L,m,i,H),d=T(L,m,$,H,!0),U=m.s(x),I=U?0:Q(L,i)/2,f=U?0:Q(L,$)/2,N=D.offset,q=d.offset,j=m.s(h)+(D.size-1)/2*m.s(e),G=S(V.x+I,b.x+f)+j+(V.y>b.y?N:-N),X=new A;return X.add({x:V.x+I,y:V.y+N}),X.add({x:G,y:V.y+N}),X.add({x:G,y:b.y+q}),X.add({x:b.x+f,y:b.y+q}),v&&X.reverse(),a(X,m)},!0),s("v.h2",function(A,D,m){return t(A,m,R)},!0),s("h.v2",function(C,U,H){return t(C,H,M)},!0)}(this,Object);